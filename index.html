<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Locus Gold Premium</title>
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-database-compat.js"></script>
    <script src="https://sad.adsgram.ai/js/sad.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --red: #ff3b3b; --red-dark: #8b0000; --bg: #050505; }
        body { background: var(--bg); color: #fff; font-family: 'Montserrat', sans-serif; overflow: hidden; height: 100vh; user-select: none; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.05); border-radius: 24px; }
        .tab-content { display: none; height: calc(100vh - 160px); overflow-y: auto; padding-bottom: 40px; }
        .active { display: block; animation: fadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }
        .btn-main { background: linear-gradient(180deg, var(--red) 0%, var(--red-dark) 100%); font-weight: 900; text-transform: uppercase; transition: 0.2s; box-shadow: 0 4px 20px rgba(255,59,59,0.25); border-radius: 16px; }
        .btn-main:active { transform: scale(0.94); }
        .nav-active { color: var(--red) !important; filter: drop-shadow(0 0 8px rgba(255,59,59,0.5)); }
        input, select { background: #0d0d0d; border: 1px solid #1a1a1a; color: #fff; padding: 14px; border-radius: 16px; width: 100%; outline: none; }
        input:focus { border-color: var(--red); }
        .click-area { width: 190px; height: 190px; border-radius: 50%; background: radial-gradient(circle, #222 0%, #000 100%); border: 8px solid #111; display: flex; align-items: center; justify-content: center; margin: 25px auto; cursor: pointer; transition: 0.1s; }
        .click-area:active { transform: scale(0.9); box-shadow: 0 0 30px rgba(255,0,0,0.15); }
        ::-webkit-scrollbar { width: 0px; }
    </style>
</head>
<body>

<div class="max-w-md mx-auto p-6 h-full flex flex-col">
    <div class="flex justify-between items-end mb-8">
        <div><p class="text-[9px] text-gray-500 font-black uppercase tracking-widest mb-1 italic">–ò–≥—Ä–æ–≤–æ–π —Å—á–µ—Ç</p><p id="m-rub" class="text-3xl font-black italic tracking-tighter">0 ‚ÇΩ</p></div>
        <div class="text-right"><p class="text-[9px] text-blue-500 font-black uppercase tracking-widest mb-1 italic">–î–æ–Ω–∞—Ç –±–∞–ª–∞–Ω—Å</p><p id="m-bc" class="text-3xl font-black italic text-blue-400 tracking-tighter">0</p></div>
    </div>

    <div id="tab-home" class="tab-content active text-center">
        <div class="click-area" onclick="Game.click()"><span class="text-6xl font-black text-red-600 italic tracking-tighter">BR</span></div>
        <div class="glass p-5 mt-10 text-left">
            <p class="text-[10px] text-blue-500 font-bold uppercase italic mb-3">–í–∞–ª—é—Ç–Ω—ã–π –æ–±–º–µ–Ω–Ω–∏–∫</p>
            <div class="flex gap-2"><input id="ex-val" type="number" placeholder="–°—É–º–º–∞ —Ä—É–±–ª–µ–π"><button onclick="Game.exchange()" class="btn-main px-6 py-2 text-[10px]">–û–±–º–µ–Ω</button></div>
            <p class="text-[8px] text-gray-600 mt-2">–ö—É—Ä—Å: 1.000.000 ‚ÇΩ –∑–∞ 1 BC</p>
        </div>
    </div>

    <div id="tab-cases" class="tab-content space-y-4">
        <div class="glass p-5 flex justify-between items-center border-l-4 border-gray-600">
            <div><p class="text-xs font-black uppercase tracking-tight">–ö–µ–π—Å ¬´–ë–æ–º–∂¬ª</p><p class="text-[10px] text-gray-500 font-bold italic">1-5 BC (1 –†–µ–∫–ª–∞–º–∞)</p></div>
            <button onclick="Game.watchAd('c1')" class="btn-main px-6 py-3 text-[10px]">–û—Ç–∫—Ä—ã—Ç—å</button>
        </div>
        <div class="glass p-5 flex justify-between items-center border-l-4 border-blue-600">
            <div><p class="text-xs font-black uppercase tracking-tight">–ö–µ–π—Å ¬´–ü–µ—Ä–µ–∫—É–ø¬ª</p><p id="p-c2" class="text-[10px] text-blue-400 font-bold italic">25-50 BC (–ü—Ä–æ–≥—Ä–µ—Å—Å: 0/3)</p></div>
            <button onclick="Game.watchAd('c2')" class="btn-main px-6 py-3 text-[10px] !bg-blue-600">–°–º–æ—Ç—Ä–µ—Ç—å</button>
        </div>
        <div class="glass p-5 flex justify-between items-center border-l-4 border-yellow-600 shadow-[0_0_20px_rgba(234,179,8,0.05)]">
            <div><p class="text-xs font-black uppercase tracking-tight text-yellow-500">–ö–µ–π—Å ¬´–í–ª–∞–¥–µ–ª–µ—Ü –¢–ö¬ª</p><p id="p-c3" class="text-[10px] text-yellow-400 font-bold italic">50-150 BC (–ü—Ä–æ–≥—Ä–µ—Å—Å: 0/5)</p></div>
            <button onclick="Game.watchAd('c3')" class="btn-main px-6 py-3 text-[10px] !bg-yellow-600">–°–º–æ—Ç—Ä–µ—Ç—å</button>
        </div>

        <div class="glass p-6 space-y-4 mt-6">
            <p class="text-[10px] font-black text-red-500 uppercase italic tracking-widest text-center">–ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ (+100 BC)</p>
            <input id="ref-link" readonly class="text-[11px] text-gray-500 bg-black/50 text-center border-none">
            <button onclick="Game.copyRef()" class="btn-main w-full py-3 text-[10px]">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
            <div id="ref-list" class="space-y-2 mt-4 max-h-40 overflow-y-auto"></div>
        </div>
    </div>

    <div id="tab-top" class="tab-content">
        <h2 class="text-center font-black italic text-red-500 uppercase tracking-widest mb-6">–ö–æ—Ä–æ–ª–∏ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤</h2>
        <div id="top-list" class="space-y-3"></div>
    </div>

    <div id="tab-out" class="tab-content space-y-6">
        <div class="glass p-6 space-y-4">
            <h2 class="text-center font-black italic text-white uppercase tracking-tighter">–í—ã–ø–ª–∞—Ç–∞ BC</h2>
            <input id="out-nick" type="text" placeholder="–í–∞—à –∏–≥—Ä–æ–≤–æ–π –Ω–∏–∫">
            <select id="out-srv"></select>
            <input id="out-sum" type="number" placeholder="–°—É–º–º–∞ BC (–ú–∏–Ω. 1000)">
            <button onclick="Game.withdraw()" class="btn-main w-full py-4 text-xs">–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</button>
        </div>
        <div>
            <p class="text-gray-600 text-[10px] font-bold uppercase italic mb-4 px-2 tracking-widest">–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</p>
            <div id="out-history" class="space-y-3 px-1"></div>
        </div>
    </div>

    <nav class="fixed bottom-0 left-0 right-0 bg-[#050505]/95 backdrop-blur-md border-t border-white/5 flex justify-around py-5">
        <div onclick="Game.tab('home')" id="n-home" class="flex flex-col items-center gap-1 text-gray-600 nav-active cursor-pointer"><span>‚ö°</span><span class="text-[8px] font-black uppercase">–ò–≥—Ä–∞</span></div>
        <div onclick="Game.tab('cases')" id="n-cases" class="flex flex-col items-center gap-1 text-gray-600 cursor-pointer"><span>üíé</span><span class="text-[8px] font-black uppercase">–ö–µ–π—Å—ã</span></div>
        <div onclick="Game.tab('top')" id="n-top" class="flex flex-col items-center gap-1 text-gray-600 cursor-pointer"><span>üèÜ</span><span class="text-[8px] font-black uppercase">–¢–æ–ø</span></div>
        <div onclick="Game.tab('out')" id="n-out" class="flex flex-col items-center gap-1 text-gray-600 cursor-pointer"><span>üí∏</span><span class="text-[8px] font-black uppercase">–í—ã–≤–æ–¥</span></div>
    </nav>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyA4zMBfNc1wTIN75Qr1KMBTrlgiU5qG-fA",
  authDomain: "locus-gold-game.firebaseapp.com",
  projectId: "locus-gold-game",
  storageBucket: "locus-gold-game.firebasestorage.app",
  messagingSenderId: "450338666762",
  appId: "1:450338666762:web:f40ef7268c539ef16662f3"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const urlParams = new URLSearchParams(window.location.search);
const userId = urlParams.get('id') || "test_user";

const SERVERS = ["RED [01]","GREEN [02]","BLUE [03]","YELLOW [04]","ORANGE [05]","PURPLE [06]","LIME [07]","PINK [08]","CHERRY [09]","BLACK [10]","INDIGO [11]","WHITE [12]","MAGENTA [13]","CRIMSON [14]","GOLD [15]","AZURE [16]","PLATINUM [17]","AQUA [18]","GRAY [19]","ICE [20]","CHILLI [21]","CHOCO [22]","MOSCOW [23]","SPB [24]","UFA [25]","SOCHI [26]","KAZAN [27]","SAMARA [28]","ROSTOV [29]","ANAPA [30]","EKATERINBURG [31]","KRASNODAR [32]","ARZAMAS [33]","NOVOSIBIRSK [34]","GROZNY [35]","SARATOV [36]","OMSK [37]","IRKUTSK [38]","VOLGOGRAD [39]","VORONEZH [40]","BELGOROD [41]","MAKHACHKALA [42]","VLADIKAVKAZ [43]","VLADIVOSTOK [44]","KALININGRAD [45]","CHELYABINSK [46]","KRASNOYARSK [47]","CHEBOKSARY [48]","KHABAROVSK [49]","PERM [50]","TULA [51]","RYAZAN [52]","MURMANSK [53]","PENZA [54]","KURSK [55]","ARKHANGELSK [56]","ORENBURG [57]","KIROV [58]","KEMEROVO [59]","TYUMEN [60]","TOLYATTI [61]","IVANOVO [62]","STAVROPOL [63]","SMOLENSK [64]","PSKOV [65]","BRYANSK [66]","OREL [67]","YAROSLAVL [68]","BARNAUL [69]","LIPETSK [70]","ULYANOVSK [71]","YAKUTSK [72]","TAMBOV [73]","BRATSK [74]","ASTRAKHAN [75]","CHITA [76]","KOSTROMA [77]","VLADIMIR [78]","KALUGA [79]","N.NOVGOROD [80]","TAGANROG [81]","VOLOGDA [82]","TVER [83]","TOMSK [84]","IZHEVSK [85]","SURGUT [86]","PODOLSK [87]","MAGADAN [88]","CHEREPOVETS [89]","NORILSK [90]"];

const Game = {
    u: { m: 0, bc: 0, ac2: 0, ac3: 0, invitedBy: null, refCount: 0 },
    
    init() {
        db.ref('users/' + userId).on('value', (s) => {
            if(s.exists()) this.u = { ...this.u, ...s.val() };
            this.updateUI();
        });
        const sel = document.getElementById('out-srv');
        SERVERS.forEach(x => { sel.innerHTML += `<option value="${x}">${x}</option>`; });
        document.getElementById('ref-link').value = `https://t.me/Locus_Gold_bot?start=${userId}`;
        const startParam = urlParams.get('start');
        if(startParam && startParam !== userId) this.registerRef(startParam);
        this.loadHistory();
        this.loadRefs();
        this.loadTop();
    },

    updateUI() {
        document.getElementById('m-rub').innerText = Math.floor(this.u.m).toLocaleString() + ' ‚ÇΩ';
        document.getElementById('m-bc').innerText = this.u.bc.toLocaleString();
        document.getElementById('p-c2').innerText = `25-50 BC (–ü—Ä–æ–≥—Ä–µ—Å—Å: ${this.u.ac2 || 0}/3)`;
        document.getElementById('p-c3').innerText = `50-150 BC (–ü—Ä–æ–≥—Ä–µ—Å—Å: ${this.u.ac3 || 0}/5)`;
    },

    save() { db.ref('users/' + userId).update(this.u); },

    click() { this.u.m += 500; this.save(); },

    tab(id) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('nav div').forEach(n => n.classList.remove('nav-active'));
        document.getElementById('tab-'+id).classList.add('active');
        document.getElementById('n-'+id).classList.add('nav-active');
    },

    async watchAd(type) {
        try {
            const ad = window.Adsgram.init({ blockId: "20963" });
            const res = await ad.show();
            if(res.done) {
                if(type === 'c1') {
                    const win = Math.floor(Math.random() * 5) + 1;
                    this.u.bc += win; alert(`–í–∞–º –≤—ã–ø–∞–ª–æ –∏–∑ –∫–µ–π—Å–∞: ${win} BC!`);
                } else if(type === 'c2') {
                    this.u.ac2 = (this.u.ac2 || 0) + 1;
                    if(this.u.ac2 >= 3) { this.u.ac2 = 0; const win = Math.floor(Math.random() * 26) + 25; this.u.bc += win; alert(`–ö–ï–ô–° –ü–ï–†–ï–ö–£–ü: +${win} BC!`); }
                } else if(type === 'c3') {
                    this.u.ac3 = (this.u.ac3 || 0) + 1;
                    if(this.u.ac3 >= 5) { this.u.ac3 = 0; const win = Math.floor(Math.random() * 101) + 50; this.u.bc += win; alert(`–ö–ï–ô–° –í–õ–ê–î–ï–õ–ï–¶ –¢–ö: +${win} BC!`); }
                }
                if(this.u.invitedBy) this.progRef();
                this.save(); this.updateUI();
            }
        } catch(e) { alert("–†–µ–∫–ª–∞–º–∞ –µ—â–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è..."); }
    },

    registerRef(refId) {
        db.ref('users/' + userId).once('value', (s) => {
            if(!s.exists()) {
                this.u.invitedBy = refId;
                db.ref('referrals/' + refId + '/' + userId).set({ ads: 0, done: false });
                this.save();
            }
        });
    },

    progRef() {
        const path = `referrals/${this.u.invitedBy}/${userId}`;
        db.ref(path).once('value', (s) => {
            if(s.exists()) {
                let d = s.val();
                if(!d.done) {
                    d.ads++;
                    if(d.ads >= 3) {
                        d.done = true;
                        db.ref(`users/${this.u.invitedBy}/bc`).transaction(c => (c || 0) + 100);
                        db.ref(`users/${this.u.invitedBy}/refCount`).transaction(c => (c || 0) + 1);
                    }
                    db.ref(path).set(d);
                }
            }
        });
    },

    loadRefs() {
        db.ref('referrals/' + userId).on('value', (s) => {
            const div = document.getElementById('ref-list'); div.innerHTML = '';
            if(!s.exists()) div.innerHTML = '<p class="text-[9px] text-center text-gray-700">–î—Ä—É–∑–µ–π –ø–æ–∫–∞ –Ω–µ—Ç</p>';
            s.forEach(c => {
                const d = c.val();
                div.innerHTML += `<div class="flex justify-between text-[9px] bg-white/5 p-3 rounded-xl border border-white/5">
                    <span>–ò–≥—Ä–æ–∫ ...${c.key.slice(-4)}</span>
                    <span class="${d.done ? 'text-green-500' : 'text-yellow-500'} font-bold">${d.done ? '‚úÖ +100 BC' : '‚è≥ ADS: ' + d.ads + '/3'}</span>
                </div>`;
            });
        });
    },

    loadTop() {
        db.ref('users').orderByChild('refCount').limitToLast(10).on('value', (s) => {
            const div = document.getElementById('top-list'); div.innerHTML = '';
            let items = [];
            s.forEach(u => { 
                const rc = u.val().refCount || 0;
                if(rc > 0) items.push({ id: u.key, count: rc }); 
            });
            items.sort((a,b) => b.count - a.count).forEach((it, i) => {
                div.innerHTML += `<div class="glass p-4 flex justify-between items-center border border-white/5">
                    <div class="flex items-center gap-3"><span class="text-xs font-black text-gray-600">#${i+1}</span><span class="text-xs">ID: ${it.id.slice(0,8)}</span></div>
                    <span class="text-xs font-black text-red-500">${it.count} —Ä–µ—Ñ.</span>
                </div>`;
            });
        });
    },

    exchange() {
        const v = parseInt(document.getElementById('ex-val').value);
        if(v >= 1000000 && this.u.m >= v) { this.u.m -= v; this.u.bc += Math.floor(v/1000000); this.save(); alert("–£—Å–ø–µ—à–Ω—ã–π –æ–±–º–µ–Ω!"); } 
        else alert("–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±–º–µ–Ω 1.000.000 ‚ÇΩ");
    },

    withdraw() {
        const n = document.getElementById('out-nick').value, s = document.getElementById('out-srv').value, a = parseInt(document.getElementById('out-sum').value);
        if(n && a >= 1000 && this.u.bc >= a) {
            this.u.bc -= a; this.save();
            db.ref('payouts/' + userId).push({ nick: n, srv: s, sum: a, status: "–í –æ–±—Ä–∞–±–æ—Ç–∫–µ", date: new Date().toLocaleDateString() });
            alert("–ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞! –û–∂–∏–¥–∞–π—Ç–µ –≤—ã–ø–ª–∞—Ç—ã.");
        } else alert("–û—à–∏–±–∫–∞: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ 1000 BC");
    },

    loadHistory() {
        db.ref('payouts/' + userId).on('value', (s) => {
            const h = document.getElementById('out-history'); h.innerHTML = '';
            s.forEach(c => {
                const d = c.val();
                h.innerHTML += `<div class="glass p-4 flex justify-between text-[10px] border-l-2 border-red-500">
                    <div><p class="font-bold text-white text-sm">${d.sum} BC</p><p class="text-gray-500">${d.srv} ‚Ä¢ ${d.nick}</p></div>
                    <div class="text-right"><p class="text-yellow-500 font-bold uppercase mb-1 text-[8px]">${d.status}</p><p class="text-[8px] text-gray-700">${d.date}</p></div>
                </div>`;
            });
        });
    },

    copyRef() { const el = document.getElementById('ref-link'); el.select(); document.execCommand('copy'); alert("–°—Å—ã–ª–∫–∞ –≤ –±—É—Ñ–µ—Ä–µ –æ–±–º–µ–Ω–∞!"); }
};
window.onload = () => Game.init();
</script>
</body>
</html>
