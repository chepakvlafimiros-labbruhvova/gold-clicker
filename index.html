<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Locus Gold - Ultimate Edition</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <style>
        /* 1. –ë–ê–ó–û–í–´–ô –°–ë–†–û–° –ò –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï */
        :root {
            --gold: #ffca28;
            --gold-glow: rgba(255, 202, 40, 0.4);
            --bg-dark: #050505;
            --surface: #121212;
            --accent-green: #2ecc71;
            --accent-blue: #3498db;
            --accent-orange: #e67e22;
            --text-gray: #aaaaaa;
        }

        * {
            margin: 0; padding: 0; box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            user-select: none; -webkit-user-select: none;
            outline: none;
        }

        body {
            background-color: var(--bg-dark);
            color: #ffffff;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            height: 100vh; width: 100vw;
            overflow: hidden; display: flex; flex-direction: column;
        }

        /* 2. –í–ï–†–•–ù–Ø–Ø –ü–ê–ù–ï–õ–¨ (–°–ß–ï–¢) */
        .header {
            padding: 25px 20px;
            display: flex; flex-direction: column; align-items: center;
            background: linear-gradient(180deg, rgba(255,202,40,0.05) 0%, rgba(0,0,0,0) 100%);
        }

        .score-card {
            width: 100%; max-width: 340px;
            background: var(--surface);
            border: 1px solid #222;
            border-radius: 24px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }

        .score-label {
            font-size: 12px; font-weight: 700; color: var(--text-gray);
            letter-spacing: 1.5px; margin-bottom: 10px;
        }

        .score-value {
            font-size: 52px; font-weight: 900; color: var(--gold);
            line-height: 1; text-shadow: 0 0 15px var(--gold-glow);
        }

        /* 3. –ö–û–ù–¢–ï–ù–¢–ù–ê–Ø –û–ë–õ–ê–°–¢–¨ (–°–¢–†–ê–ù–ò–¶–´) */
        .content {
            flex: 1; position: relative; overflow-y: auto; padding-bottom: 100px;
        }

        .page {
            position: absolute; width: 100%; min-height: 100%;
            display: none; flex-direction: column; align-items: center;
            padding: 0 20px; opacity: 0; transform: translateY(10px);
            transition: all 0.3s ease;
        }

        .page.active {
            display: flex; opacity: 1; transform: translateY(0);
        }

        /* 4. –ú–û–ù–ï–¢–ê –ò –ö–õ–ò–ö–ï–† */
        .coin-box {
            flex: 1; display: flex; align-items: center; justify-content: center;
            min-height: 350px;
        }

        .coin-btn {
            width: 240px; height: 240px;
            background: radial-gradient(circle, #ffca28 0%, #d4a017 100%);
            border-radius: 50%; border: 8px solid #1a1a1a;
            box-shadow: 0 0 50px rgba(212, 160, 23, 0.3), inset 0 0 20px rgba(255,255,255,0.4);
            display: flex; align-items: center; justify-content: center;
            font-size: 100px; font-weight: 900; color: #3d2b00;
            cursor: pointer; transition: transform 0.05s;
            position: relative;
        }

        .coin-btn:active { transform: scale(0.94); }

        /* 5. –ö–ù–û–ü–ö–ò –î–ï–ô–°–¢–í–ò–ô */
        .action-list { width: 100%; max-width: 400px; display: flex; flex-direction: column; gap: 12px; margin-top: 20px; }

        .btn {
            width: 100%; padding: 18px; border-radius: 16px; border: none;
            font-size: 16px; font-weight: 700; color: #fff;
            display: flex; align-items: center; justify-content: center; gap: 10px;
            cursor: pointer; position: relative; overflow: hidden;
        }

        .btn-green { background: var(--accent-green); box-shadow: 0 4px 15px rgba(46, 204, 113, 0.2); }
        .btn-blue { background: var(--accent-blue); box-shadow: 0 4px 15px rgba(52, 152, 219, 0.2); }
        .btn-disabled { background: #222; color: #555; cursor: not-allowed; }
        .btn-orange { background: var(--accent-orange); }

        /* 6. –°–ü–ò–°–ö–ò –ò –ò–ù–§–û-–ë–û–ö–°–´ */
        .info-section { width: 100%; max-width: 400px; margin-top: 30px; }
        .section-title { font-size: 15px; color: var(--gold); margin-bottom: 12px; font-weight: 700; padding-left: 5px; }

        .list-container {
            background: var(--surface); border-radius: 20px; border: 1px solid #222;
            width: 100%; overflow: hidden;
        }

        .list-item {
            padding: 15px 20px; border-bottom: 1px solid #222;
            display: flex; justify-content: space-between; align-items: center;
            font-size: 14px;
        }

        .list-item:last-child { border-bottom: none; }

        /* 7. –¢–ê–ë-–ë–ê–† (–ù–ò–ñ–ù–Ø–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø) */
        .tab-bar {
            position: fixed; bottom: 0; width: 100%; height: 85px;
            background: #0a0a0a; border-top: 1px solid #1a1a1a;
            display: flex; justify-content: space-around; align-items: center;
            padding-bottom: env(safe-area-inset-bottom); z-index: 1000;
        }

        .tab {
            display: flex; flex-direction: column; align-items: center; gap: 6px;
            color: #444; text-decoration: none; flex: 1; transition: 0.2s;
        }

        .tab.active { color: var(--gold); }
        .tab-icon { font-size: 22px; }
        .tab-label { font-size: 10px; font-weight: 800; letter-spacing: 0.5px; }

        /* 8. –ê–ù–ò–ú–ê–¶–ò–Ø –ü–û–Ø–í–õ–ï–ù–ò–Ø –ö–õ–ò–ö–ê (+1) */
        .floating-text {
            position: absolute; color: var(--gold); font-weight: 900;
            font-size: 28px; pointer-events: none; animation: floatUp 0.8s ease-out forwards;
            z-index: 500;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) opacity: 1; }
            100% { transform: translateY(-100px) opacity: 0; }
        }

        /* –°—Ç–∞—Ç—É—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è */
        #sync-status {
            position: fixed; top: 10px; left: 10px; font-size: 10px;
            color: #333; z-index: 9999;
        }
    </style>
</head>
<body>

    <div id="sync-status">Cloud Synced</div>

    <header class="header">
        <div class="score-card">
            <div class="score-label">–ë–ê–õ–ê–ù–° GOLD</div>
            <div id="balance" class="score-value">0</div>
        </div>
    </header>

    <main class="content">
        <div id="page-main" class="page active">
            <div class="coin-box">
                <div id="coin-trigger" class="coin-btn">G</div>
            </div>
            <div style="color: #333; font-size: 11px; margin-bottom: 10px;">ID: <span id="display-id">...</span></div>
        </div>

        <div id="page-bonuses" class="page">
            <div class="action-list">
                <button id="ad-btn" class="btn btn-blue" onclick="App.watchAd()">
                    <span>üì∫</span> –°–ú–û–¢–†–ï–¢–¨ –†–ï–ö–õ–ê–ú–£ (+10 G)
                </button>
                <button class="btn btn-green" onclick="App.copyInviteLink()">
                    <span>üîó</span> –ü–†–ò–ì–õ–ê–°–ò–¢–¨ –î–†–£–ì–ê
                </button>
            </div>
            
            <div class="info-section">
                <div class="section-title">–í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–µ—Ç—å</div>
                <div id="ref-list" class="list-container">
                    <div style="padding: 20px; text-align: center; color: #444;">–°–ø–∏—Å–æ–∫ –ø—É—Å—Ç</div>
                </div>
            </div>
        </div>

        <div id="page-withdraw" class="page">
            <div class="action-list">
                <button id="withdraw-btn" class="btn btn-disabled" onclick="App.requestWithdraw()">
                    üè¶ –í–´–í–ï–°–¢–ò GOLD (–ú–ò–ù. 750)
                </button>
            </div>

            <div class="info-section">
                <div class="section-title">–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</div>
                <div id="history-list" class="list-container">
                    <div style="padding: 20px; text-align: center; color: #444;">–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞</div>
                </div>
            </div>
        </div>
    </main>

    <nav class="tab-bar">
        <div class="tab active" onclick="App.switchTab('main', this)">
            <span class="tab-icon">ü™ô</span><span class="tab-label">–ì–õ–ê–í–ù–ê–Ø</span>
        </div>
        <div class="tab" onclick="App.switchTab('bonuses', this)">
            <span class="tab-icon">üéÅ</span><span class="tab-label">–ë–û–ù–£–°–´</span>
        </div>
        <div class="tab" onclick="App.switchTab('withdraw', this)">
            <span class="tab-icon">üí≥</span><span class="tab-label">–í–´–í–û–î</span>
        </div>
    </nav>

    <script>
        /**
         * –ú–û–î–£–õ–¨ –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò
         */
        const CONFIG = {
            firebase: {
                apiKey: "AIzaSyCoa29KS-sin6hoRz0ZbE4f3ki0tZLwkKI",
                authDomain: "gold-clicker-5d882.firebaseapp.com",
                projectId: "gold-clicker-5d882",
                storageBucket: "gold-clicker-5d882.firebasestorage.app",
                messagingSenderId: "83489312782",
                appId: "1:83489312782:web:ee5b7bdc390e53e7dd6c5f"
            },
            minWithdraw: 750,
            saveInterval: 3000, // –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–∞–∑ –≤ 3 —Å–µ–∫
            clickValue: 1
        };

        /**
         * –ì–õ–ê–í–ù–û–ï –Ø–î–†–û –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
         */
        const App = {
            user: {
                id: null,
                gold: 0,
                pendingGold: 0, // –ó–æ–ª–æ—Ç–æ, –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–µ –ª–æ–∫–∞–ª—å–Ω–æ –∏ –µ—â–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ
                isAdLoading: false
            },
            
            db: null,
            tg: window.Telegram.WebApp,

            async init() {
                this.tg.expand();
                this.tg.ready();
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
                if (!firebase.apps.length) firebase.initializeApp(CONFIG.firebase);
                this.db = firebase.firestore();

                // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                this.user.id = this.tg.initDataUnsafe?.user?.id?.toString() || "TEST_USER_5223115893";
                document.getElementById('display-id').innerText = this.user.id;

                await this.loadUserData();
                this.startSyncLoop();
                this.bindEvents();
                this.render();
            },

            /**
             * –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• –° –ü–†–û–í–ï–†–ö–û–ô –ù–ê –û–®–ò–ë–ö–ò
             */
            async loadUserData() {
                try {
                    const doc = await this.db.collection('players').doc(this.user.id).get();
                    if (doc.exists) {
                        const data = doc.data();
                        this.user.gold = Number(data.gold) || 0;
                    } else {
                        await this.db.collection('players').doc(this.user.id).set({
                            gold: 0,
                            username: this.tg.initDataUnsafe?.user?.username || "Unknown",
                            createdAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                        this.user.gold = 0;
                    }
                } catch (err) {
                    console.error("Load Error:", err);
                    // –ï—Å–ª–∏ –±–∞–∑–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, –ø—ã—Ç–∞–µ–º—Å—è –≤–∑—è—Ç—å –∏–∑ –∫—ç—à–∞ –±—Ä–∞—É–∑–µ—Ä–∞
                    this.user.gold = Number(localStorage.getItem('cached_gold')) || 0;
                }
            },

            /**
             * –°–û–ë–´–¢–ò–Ø (–ö–õ–ò–ö–ò –ò –¢–ê–ü–´)
             */
            bindEvents() {
                const trigger = document.getElementById('coin-trigger');
                
                trigger.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    this.handleGoldClick(e.touches[0].clientX, e.touches[0].clientY);
                });

                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–ø–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–Ω—Å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å)
                window.addEventListener('beforeunload', () => this.forceSync());
            },

            handleGoldClick(x, y) {
                // 1. –õ–æ–∫–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫–ª–∏–∫–∞
                this.user.gold += CONFIG.clickValue;
                this.user.pendingGold += CONFIG.clickValue;
                
                // 2. –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
                this.createFloatingText(x, y);
                this.render();
                
                // 3. –¢–∞–∫—Ç–∏–ª—å–Ω—ã–π –æ—Ç–∫–ª–∏–∫
                if (this.tg.HapticFeedback) this.tg.HapticFeedback.impactOccurred('light');
                
                // 4. –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π
                localStorage.setItem('cached_gold', this.user.gold);
            },

            /**
             * –°–ò–°–¢–ï–ú–ê –§–û–ù–û–í–û–ô –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–ò (–ë–ï–ó –õ–ê–ì–û–í)
             */
            startSyncLoop() {
                setInterval(() => this.forceSync(), CONFIG.saveInterval);
            },

            async forceSync() {
                if (this.user.pendingGold === 0) return;

                const amountToSync = this.user.pendingGold;
                const statusEl = document.getElementById('sync-status');
                
                statusEl.innerText = "Syncing...";
                statusEl.style.color = "#ffca28";

                try {
                    // –ò—Å–ø–æ–ª—å–∑—É–µ–º increment, —á—Ç–æ–±—ã –Ω–µ –∑–∞—Ç–µ—Ä–µ—Ç—å –¥–∞–Ω–Ω—ã–µ, –µ—Å–ª–∏ –æ–Ω–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –≤ –±–∞–∑–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏—à–µ–ª —Ä–µ—Ñ–µ—Ä–∞–ª)
                    await this.db.collection('players').doc(this.user.id).update({
                        gold: firebase.firestore.FieldValue.increment(amountToSync),
                        lastUpdate: firebase.firestore.FieldValue.serverTimestamp()
                    });

                    // –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –±–∞–∑—ã —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π —Å—á–µ—Ç—á–∏–∫ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π
                    this.user.pendingGold -= amountToSync;
                    
                    statusEl.innerText = "Cloud Synced";
                    statusEl.style.color = "#2ecc71";
                    console.log("Synced:", amountToSync);
                } catch (err) {
                    console.error("Sync Error:", err);
                    statusEl.innerText = "Sync Failed - Retrying";
                    statusEl.style.color = "#e74c3c";
                }
            },

            /**
             * –õ–û–ì–ò–ö–ê –†–ï–ö–õ–ê–ú–´ (–ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø)
             */
            async watchAd() {
                if (this.user.isAdLoading) return;
                
                const btn = document.getElementById('ad-btn');
                this.user.isAdLoading = true;
                btn.classList.add('btn-disabled');
                btn.innerText = "–ó–ê–ì–†–£–ó–ö–ê –†–ï–ö–õ–ê–ú–´...";

                // –¢–∞–π–º-–∞—É—Ç –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ —Ä–µ–∫–ª–∞–º–∞ –∑–∞–≤–∏—Å–Ω–µ—Ç
                const safetyTimeout = setTimeout(() => {
                    this.user.isAdLoading = false;
                    this.render();
                }, 10000);

                try {
                    // –°–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (—Å—é–¥–∞ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–¥ Adsgram)
                    await new Promise(res => setTimeout(res, 2000));
                    
                    // –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–∞ —á–µ—Ä–µ–∑ Pending
                    this.user.gold += 10;
                    this.user.pendingGold += 10;
                    
                    this.tg.showAlert("–í—ã –ø–æ–ª—É—á–∏–ª–∏ +10 GOLD!");
                    this.forceSync();
                } catch (e) {
                    this.tg.showAlert("–†–µ–∫–ª–∞–º–∞ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å.");
                } finally {
                    clearTimeout(safetyTimeout);
                    this.user.isAdLoading = false;
                    this.render();
                }
            },

            /**
             * –í–´–í–û–î –°–†–ï–î–°–¢–í
             */
            async requestWithdraw() {
                if (this.user.gold < CONFIG.minWithdraw) return;

                const wallet = prompt("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã –∏–ª–∏ –∫—Ä–∏–ø—Ç–æ-–∫–æ—à–µ–ª—å–∫–∞:");
                if (!wallet || wallet.length < 4) return;

                try {
                    const tx = {
                        amount: Math.floor(this.user.gold),
                        wallet: wallet,
                        status: 'pending',
                        date: new Date().toLocaleString()
                    };

                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞—è–≤–∫—É
                    await this.db.collection('withdrawals').add({
                        ...tx,
                        userId: this.user.id
                    });

                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ª–∏—á–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é
                    await this.db.collection('players').doc(this.user.id).collection('history').add(tx);

                    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –±–∞–ª–∞–Ω—Å
                    this.user.gold = 0;
                    this.user.pendingGold = 0;
                    await this.db.collection('players').doc(this.user.id).update({ gold: 0 });

                    this.tg.showAlert("–ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞!");
                    this.render();
                    this.loadHistory();
                } catch (e) {
                    this.tg.showAlert("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞—è–≤–∫–∏.");
                }
            },

            /**
             * –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò
             */
            render() {
                const balEl = document.getElementById('balance');
                const wBtn = document.getElementById('withdraw-btn');
                const adBtn = document.getElementById('ad-btn');

                // –ü–ª–∞–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
                balEl.innerText = Math.floor(this.user.gold).toLocaleString();

                // –ö–Ω–æ–ø–∫–∞ –≤—ã–≤–æ–¥–∞
                if (this.user.gold >= CONFIG.minWithdraw) {
                    wBtn.className = "btn btn-orange";
                    wBtn.innerText = "üè¶ –í–´–í–ï–°–¢–ò GOLD";
                } else {
                    wBtn.className = "btn btn-disabled";
                    wBtn.innerText = `üè¶ –ú–ò–ù. –í–´–í–û–î (–ï–©–ï ${Math.ceil(CONFIG.minWithdraw - this.user.gold)})`;
                }

                // –ö–Ω–æ–ø–∫–∞ —Ä–µ–∫–ª–∞–º—ã (–µ—Å–ª–∏ –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è)
                if (!this.user.isAdLoading) {
                    adBtn.className = "btn btn-blue";
                    adBtn.innerHTML = "<span>üì∫</span> –°–ú–û–¢–†–ï–¢–¨ –†–ï–ö–õ–ê–ú–£ (+10 G)";
                }
            },

            createFloatingText(x, y) {
                const el = document.createElement('div');
                el.className = 'floating-text';
                el.innerText = `+${CONFIG.clickValue}`;
                el.style.left = `${x - 15}px`;
                el.style.top = `${y - 30}px`;
                document.body.appendChild(el);
                setTimeout(() => el.remove(), 800);
            },

            switchTab(tabId, el) {
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                
                document.getElementById(`page-${tabId}`).classList.add('active');
                el.classList.add('active');

                if (tabId === 'withdraw') this.loadHistory();
            },

            copyInviteLink() {
                const link = `https://t.me/Locus_Gold_bot/Locus_Gold?startapp=${this.user.id}`;
                const el = document.createElement('textarea');
                el.value = link;
                document.body.appendChild(el);
                el.select();
                document.execCommand('copy');
                document.body.removeChild(el);
                this.tg.showAlert("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞! –û—Ç–ø—Ä–∞–≤—å –¥—Ä—É–≥—É –∏ –ø–æ–ª—É—á–∏ –±–æ–Ω—É—Å.");
            },

            async loadHistory() {
                const cont = document.getElementById('history-list');
                try {
                    const snap = await this.db.collection('players').doc(this.user.id).collection('history').get();
                    if (snap.empty) return;
                    
                    cont.innerHTML = "";
                    snap.forEach(doc => {
                        const d = doc.data();
                        cont.innerHTML += `
                            <div class="list-item">
                                <div><div style="font-weight:bold">${d.amount} G</div><div style="font-size:10px;color:#444">${d.date}</div></div>
                                <div style="color:var(--accent-orange)">${d.status.toUpperCase()}</div>
                            </div>`;
                    });
                } catch (e) {}
            }
        };

        // –ó–∞–ø—É—Å–∫
        App.init();
    </script>
</body>
</html>
