<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Locus Gold Luxury</title>
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-database-compat.js"></script>
    <script src="https://sad.adsgram.ai/js/sad.min.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;900&display=swap" rel="stylesheet">
    <style>
        :root { --red: #ff3b3b; --red-glow: rgba(255, 59, 59, 0.5); --bg: #030303; }
        body { background: var(--bg); color: #fff; font-family: 'Montserrat', sans-serif; overflow: hidden; height: 100vh; user-select: none; }
        .glass { background: linear-gradient(145deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.01) 100%); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.08); border-radius: 28px; }
        .tab-content { display: none; height: calc(100vh - 160px); overflow-y: auto; padding: 20px; scrollbar-width: none; }
        .active { display: block; animation: slideUp 0.4s ease; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .btn-main { background: linear-gradient(180deg, #ff4d4d 0%, #8b0000 100%); font-weight: 900; border-radius: 18px; transition: 0.3s; box-shadow: 0 10px 20px -5px var(--red-glow); color: white; text-transform: uppercase; letter-spacing: 1px; border: 1px solid rgba(255,255,255,0.1); }
        .nav-active { color: var(--red) !important; filter: drop-shadow(0 0 8px var(--red)); }
        .click-area { width: 190px; height: 190px; border-radius: 50%; background: radial-gradient(circle, #1a1a1a 0%, #000 100%); border: 10px solid #0a0a0a; display: flex; align-items: center; justify-content: center; margin: 10px auto; cursor: pointer; transition: 0.1s; box-shadow: 0 0 30px rgba(255,0,0,0.1); }
        .click-area:active { transform: scale(0.9); border-color: var(--red); }
        ::-webkit-scrollbar { width: 0; }
    </style>
</head>
<body>

<div class="max-w-md mx-auto h-full flex flex-col relative">
    <div class="p-6 flex justify-between items-center z-10">
        <div><p class="text-[9px] text-gray-500 font-black uppercase tracking-widest">–í–∏—Ä—Ç—ã</p><p id="m-rub" class="text-2xl font-black italic">0 ‚ÇΩ</p></div>
        <div class="text-right"><p class="text-[9px] text-blue-500 font-black uppercase tracking-widest">Black Coins</p><p id="m-bc" class="text-2xl font-black italic text-blue-400">0</p></div>
    </div>

    <div class="px-6 mb-2 flex items-center gap-2">
        <div class="h-2 w-2 rounded-full bg-green-500 animate-pulse"></div>
        <p class="text-[9px] font-black text-gray-500 uppercase">–í —Å–µ—Ç–∏: <span id="online-count" class="text-green-500">0</span></p>
    </div>

    <div id="tab-home" class="tab-content active text-center">
        <div class="click-area" onclick="Game.click()"><span class="text-6xl font-black text-red-600 italic tracking-tighter">BR</span></div>
        <div class="glass p-5 mt-4">
            <p class="text-[10px] text-blue-400 font-black uppercase mb-3 italic">–û–±–º–µ–Ω 1.000.000 ‚ÇΩ –Ω–∞ 1 BC</p>
            <div class="flex gap-2"><input id="ex-val" type="number" placeholder="–°—É–º–º–∞ ‚ÇΩ" class="bg-white/5 border border-white/10 rounded-xl p-3 w-full outline-none text-sm"><button onclick="Game.exchange()" class="btn-main px-4 py-2 text-[10px]">–û–ë–ú–ï–ù</button></div>
        </div>
    </div>

    <div id="tab-cases" class="tab-content space-y-3">
        <div class="glass p-4 flex justify-between items-center border-l-4 border-gray-600">
            <div><p class="text-xs font-black uppercase">–ö–µ–π—Å ¬´–ë–æ–º–∂¬ª</p><p class="text-[9px] text-gray-400">–ù–∞–≥—Ä–∞–¥–∞: <span class="text-white">1-5 BC</span></p></div>
            <button onclick="Game.watchAd('c1')" class="btn-main px-4 py-2 text-[9px]">–û–¢–ö–†–´–¢–¨</button>
        </div>
        <div class="glass p-4 flex justify-between items-center border-l-4 border-blue-600">
            <div><p class="text-xs font-black uppercase text-blue-400">–ö–µ–π—Å ¬´–ü–µ—Ä–µ–∫—É–ø¬ª</p><p class="text-[9px] text-gray-400">–ù–∞–≥—Ä–∞–¥–∞: <span class="text-white">25-50 BC</span></p><p id="p-c2" class="text-[8px] text-blue-500 italic">–ü—Ä–æ–≥—Ä–µ—Å—Å: 0/3 ADS</p></div>
            <button onclick="Game.watchAd('c2')" class="btn-main px-4 py-2 text-[9px] !bg-blue-600">–°–ú–û–¢–†–ï–¢–¨</button>
        </div>
        <div class="glass p-4 flex justify-between items-center border-l-4 border-yellow-500">
            <div><p class="text-xs font-black uppercase text-yellow-500">–ö–µ–π—Å ¬´–í–ª–∞–¥–µ–ª–µ—Ü –¢–ö¬ª</p><p class="text-[9px] text-gray-400">–ù–∞–≥—Ä–∞–¥–∞: <span class="text-white">50-150 BC</span></p><p id="p-c3" class="text-[8px] text-yellow-500 italic">–ü—Ä–æ–≥—Ä–µ—Å—Å: 0/5 ADS</p></div>
            <button onclick="Game.watchAd('c3')" class="btn-main px-4 py-2 text-[9px] !bg-yellow-600">–°–ú–û–¢–†–ï–¢–¨</button>
        </div>
    </div>

    <div id="tab-stats" class="tab-content space-y-4">
        <h3 class="text-center font-black italic text-red-500 uppercase tracking-widest">–í–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
        <div class="grid grid-cols-2 gap-3">
            <div class="glass p-4 text-center">
                <p class="text-[8px] text-gray-500 uppercase">–í—Å–µ–≥–æ –∫–µ–π—Å–æ–≤</p>
                <p id="st-total" class="text-xl font-black italic">0</p>
            </div>
            <div class="glass p-4 text-center border-b-2 border-blue-600">
                <p class="text-[8px] text-blue-500 uppercase">–û–±–º–µ–Ω –≤–∏—Ä—Ç</p>
                <p id="st-ex" class="text-xl font-black italic text-blue-400">0</p>
            </div>
        </div>
        <div class="glass p-5 space-y-3">
            <p class="text-[10px] font-black uppercase border-b border-white/10 pb-2 text-blue-400 italic">–î–æ—Ö–æ–¥ —Å –∫–µ–π—Å–æ–≤:</p>
            <div class="flex justify-between text-[11px]"><span>üì¶ –ë–æ–º–∂:</span><span id="st-c1" class="font-black">0 BC</span></div>
            <div class="flex justify-between text-[11px]"><span>üì¶ –ü–µ—Ä–µ–∫—É–ø:</span><span id="st-c2" class="font-black">0 BC</span></div>
            <div class="flex justify-between text-[11px]"><span>üì¶ –í–ª–∞–¥–µ–ª–µ—Ü –¢–ö:</span><span id="st-c3" class="font-black">0 BC</span></div>
        </div>
    </div>

    <div id="tab-out" class="tab-content">
        <div class="glass p-5 mb-5 space-y-3">
            <h3 class="text-xs font-black uppercase text-red-500 italic text-center">–í—ã–≤–æ–¥ Black Coins</h3>
            <input id="out-nick" type="text" placeholder="Nick_Name" class="bg-white/5 border border-white/10 rounded-xl p-3 w-full outline-none text-sm">
            <select id="out-srv" class="bg-white/5 border border-white/10 rounded-xl p-3 w-full outline-none text-sm font-bold text-white uppercase"></select>
            <input id="out-sum" type="number" placeholder="–°—É–º–º–∞ (–æ—Ç 500 BC)" class="bg-white/5 border border-white/10 rounded-xl p-3 w-full outline-none text-sm">
            <button onclick="Game.withdraw()" class="btn-main w-full py-3 text-[10px]">–í–´–í–ï–°–¢–ò</button>
        </div>
        <div id="out-history" class="space-y-2 pb-10"></div>
    </div>

    <nav class="fixed bottom-5 left-5 right-5 glass flex justify-around py-4 z-50">
        <div onclick="Game.tab('home')" id="n-home" class="flex flex-col items-center text-gray-500 nav-active cursor-pointer"><span class="text-xl">‚ö°</span><span class="text-[8px] font-black mt-1 uppercase">–ò–≥—Ä–∞</span></div>
        <div onclick="Game.tab('cases')" id="n-cases" class="flex flex-col items-center text-gray-500 cursor-pointer"><span class="text-xl">üì¶</span><span class="text-[8px] font-black mt-1 uppercase">–ö–µ–π—Å—ã</span></div>
        <div onclick="Game.tab('stats')" id="n-stats" class="flex flex-col items-center text-gray-500 cursor-pointer"><span class="text-xl">üìä</span><span class="text-[8px] font-black mt-1 uppercase">–°—Ç–∞—Ç–∞</span></div>
        <div onclick="Game.tab('out')" id="n-out" class="flex flex-col items-center text-gray-500 cursor-pointer"><span class="text-xl">üí∏</span><span class="text-[8px] font-black mt-1 uppercase">–í—ã–≤–æ–¥</span></div>
    </nav>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCxKZLKhg8DmHaw7EcaEchhEMFwEUxqHU",
  authDomain: "locusbot-7fcfb.firebaseapp.com",
  projectId: "locusbot-7fcfb",
  storageBucket: "locusbot-7fcfb.firebasestorage.app",
  messagingSenderId: "314890129034",
  appId: "1:314890129034:web:79793e93607d72f2e6e773"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const tg = window.Telegram.WebApp;
tg.expand();

const userId = (() => {
    let lid = localStorage.getItem('locus_id');
    if(!lid) { lid = "u" + Math.floor(Math.random()*89999+10000); localStorage.setItem('locus_id', lid); }
    return lid;
})();

const SERVERS = ["RED","GREEN","BLUE","YELLOW","ORANGE","PURPLE","LIME","PINK","CHERRY","BLACK","INDIGO","WHITE","MAGENTA","CRIMSON","GOLD","AZURE","PLATINUM","AQUA","GRAY","ICE","CHILLI","CHOCO","MOSCOW","SPB","UFA","SOCHI","KAZAN","SAMARA","ROSTOV","ANAPA","EKATERINBURG","KRASNODAR","ARZAMAS","NOVOSIBIRSK","GROZNY","SARATOV","OMSK","IRKUTSK","VOLGOGRAD","VORONEZH","BELGOROD","MAKHACHKALA","VLADIKAVKAZ","VLADIVOSTOK","KALININGRAD","CHELYABINSK","KRASNOYARSK","CHEBOKSARY","KHABAROVSK","PERM","TULA","RYAZAN","MURMANSK","PENZA","KURSK","ARKHANGELSK","ORENBURG","KIROV","KEMEROVO","TYUMEN","TOLYATTI","IVANOVO","STAVROPOL","SMOLENSK","PSKOV","BRYANSK","OREL","YAROSLAVL","BARNAUL","LIPETSK","ULYANOVSK","YAKUTSK","TAMBOV","BRATSK","ASTRAKHAN","CHITA","KOSTROMA","VLADIMIR","KALUGA","N.NOVGOROD","TAGANROG","VOLOGDA","TVER","TOMSK","IZHEVSK","SURGUT","PODOLSK","MAGADAN","CHEREPOVETS","NORILSK"];

const Game = {
    u: { m: 0, bc: 0, ac2: 0, ac3: 0, c_total: 0, c_tk: 0, e1: 0, e2: 0, e3: 0, e_ex: 0 },
    clickCount: 0,
    nextAdThreshold: 750,

    init() {
        this.nextAdThreshold = Math.floor(Math.random() * (1000 - 500 + 1)) + 500;
        db.ref('users/' + userId).on('value', (s) => {
            if(s.exists()) { this.u = { ...this.u, ...s.val() }; this.updateUI(); }
        });

        const pRef = db.ref('presence/' + userId);
        db.ref('.info/connected').on('value', (snap) => {
            if (snap.val()) { pRef.onDisconnect().remove(); pRef.set(true); }
        });
        db.ref('presence').on('value', (snap) => {
            document.getElementById('online-count').innerText = (snap.numChildren() || 0) + 14;
        });

        const sel = document.getElementById('out-srv');
        sel.innerHTML = '<option value="" disabled selected>–°–ï–†–í–ï–†</option>';
        SERVERS.forEach(x => { sel.innerHTML += `<option value="${x}">${x}</option>`; });
        this.loadHistory();
    },

    updateUI() {
        document.getElementById('m-rub').innerText = Math.floor(this.u.m).toLocaleString() + ' ‚ÇΩ';
        document.getElementById('m-bc').innerText = this.u.bc.toLocaleString();
        document.getElementById('p-c2').innerText = `–ü—Ä–æ–≥—Ä–µ—Å—Å: ${this.u.ac2 || 0}/3 ADS`;
        document.getElementById('p-c3').innerText = `–ü—Ä–æ–≥—Ä–µ—Å—Å: ${this.u.ac3 || 0}/5 ADS`;
        document.getElementById('st-total').innerText = this.u.c_total || 0;
        document.getElementById('st-ex').innerText = (this.u.e_ex || 0) + ' BC';
        document.getElementById('st-c1').innerText = (this.u.e1 || 0) + ' BC';
        document.getElementById('st-c2').innerText = (this.u.e2 || 0) + ' BC';
        document.getElementById('st-c3').innerText = (this.u.e3 || 0) + ' BC';
    },

    save() { db.ref('users/' + userId).update(this.u); },

    showInterstitial() {
        const ad = window.Adsgram.init({ blockId: "int-21048" });
        ad.show().catch(e => {});
    },

    click() {
        this.u.m += 100;
        this.clickCount++;
        if (this.clickCount >= this.nextAdThreshold) {
            this.showInterstitial();
            this.clickCount = 0;
            this.nextAdThreshold = Math.floor(Math.random() * (1000 - 500 + 1)) + 500;
        }
        this.save();
    },

    tab(id) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('nav div').forEach(n => n.classList.remove('nav-active'));
        document.getElementById('tab-'+id).classList.add('active');
        document.getElementById('n-'+id).classList.add('nav-active');
    },

    async watchAd(type) {
        const ad = window.Adsgram.init({ blockId: "20963" });
        ad.show().then(res => {
            if(res.done) {
                let win = 0;
                if(type === 'c1') { 
                    win = Math.floor(Math.random()*5)+1; 
                    this.u.bc += win; this.u.e1 = (this.u.e1 || 0) + win;
                    this.u.c_total = (this.u.c_total || 0) + 1;
                }
                else if(type === 'c2') {
                    this.u.ac2 = (this.u.ac2 || 0) + 1;
                    if(this.u.ac2 >= 3) { 
                        this.u.ac2 = 0; win = Math.floor(Math.random()*26)+25; 
                        this.u.bc += win; this.u.e2 = (this.u.e2 || 0) + win;
                        this.u.c_total = (this.u.c_total || 0) + 1;
                    }
                } else if(type === 'c3') {
                    this.u.ac3 = (this.u.ac3 || 0) + 1;
                    if(this.u.ac3 >= 5) { 
                        this.u.ac3 = 0; win = Math.floor(Math.random()*101)+50; 
                        this.u.bc += win; this.u.e3 = (this.u.e3 || 0) + win;
                        this.u.c_total = (this.u.c_total || 0) + 1;
                        this.u.c_tk = (this.u.c_tk || 0) + 1;
                    }
                }
                this.save();
            }
        });
    },

    exchange() {
        const v = parseInt(document.getElementById('ex-val').value);
        if(v >= 1000000 && this.u.m >= v) { 
            const bcWin = Math.floor(v/1000000);
            this.u.m -= v; 
            this.u.bc += bcWin; 
            this.u.e_ex = (this.u.e_ex || 0) + bcWin;
            this.save(); alert("–û–±–º–µ–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω!");
        } else alert("–ú–∏–Ω. 1.000.000 ‚ÇΩ");
    },

    withdraw() {
        const n = document.getElementById('out-nick').value, s = document.getElementById('out-srv').value, a = parseInt(document.getElementById('out-sum').value);
        if((this.u.c_tk || 0) < 10) { alert(`–û—à–∏–±–∫–∞! –î–ª—è –≤—ã–≤–æ–¥–∞ –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –µ—â–µ ${10 - (this.u.c_tk || 0)} –∫–µ–π—Å–æ–≤ ¬´–í–ª–∞–¥–µ–ª–µ—Ü –¢–ö¬ª`); return; }
        if(n.length > 3 && s && a >= 500 && this.u.bc >= a) {
            this.u.bc -= a; this.save();
            db.ref('payouts/' + userId).push({ nick: n, srv: s, sum: a, status: "–í –æ–±—Ä–∞–±–æ—Ç–∫–µ", date: new Date().toLocaleDateString() });
            alert("–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!");
        } else alert("–û—à–∏–±–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –±–∞–ª–∞–Ω—Å–∞!");
    },

    loadHistory() {
        db.ref('payouts/' + userId).on('value', (s) => {
            const h = document.getElementById('out-history'); h.innerHTML = '';
            if(!s.exists()) return;
            s.forEach(c => {
                const d = c.val();
                const key = c.key;
                if(d.status !== "–í –æ–±—Ä–∞–±–æ—Ç–∫–µ" && d.status !== "–í—ã–≤–µ–¥–µ–Ω–æ") {
                    this.u.bc += d.sum;
                    this.save();
                    alert(`–û–¢–ú–ï–ù–ê –í–´–í–û–î–ê –Ω–∞ ${d.sum} BC!\n–ü—Ä–∏—á–∏–Ω–∞: ${d.status}`);
                    db.ref('payouts/' + userId + '/' + key).remove();
                    return;
                }
                h.innerHTML += `<div class="glass p-3 flex justify-between items-center border-l-2 ${d.status === '–í—ã–≤–µ–¥–µ–Ω–æ' ? 'border-green-500' : 'border-yellow-500'}">
                    <div><p class="font-bold text-xs">${d.sum} BC</p><p class="text-[8px] text-gray-500 uppercase">${d.srv} ‚Ä¢ ${d.nick}</p></div>
                    <p class="${d.status === '–í—ã–≤–µ–¥–µ–Ω–æ' ? 'text-green-500' : 'text-yellow-500'} font-black text-[8px] uppercase">${d.status}</p>
                </div>`;
            });
        });
    }
};
window.onload = () => Game.init();
</script>
</body>
</html>
