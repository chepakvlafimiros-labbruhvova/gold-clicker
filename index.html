<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Locus Gold Premium</title>
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-database-compat.js"></script>
    <script src="https://sad.adsgram.ai/js/sad.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800;900&display=swap" rel="stylesheet">
    <style>
        :root { --br-red: #ff3333; --br-red-dark: #8b0000; }
        body { 
            background: #050505; 
            color: #ffffff; 
            font-family: 'Montserrat', sans-serif; 
            overflow: hidden; 
            height: 100vh; 
            user-select: none;
            background-image: radial-gradient(circle at 50% -20%, #220000 0%, #050505 100%);
        }
        
        .glass { 
            background: rgba(255, 255, 255, 0.03); 
            backdrop-filter: blur(10px); 
            border: 1px solid rgba(255, 255, 255, 0.05); 
            border-radius: 24px; 
        }

        .tab-content { display: none; height: calc(100vh - 180px); overflow-y: auto; padding-right: 4px; }
        .tab-content.active { display: block; animation: fadeIn 0.3s ease-out; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .btn-main {
            background: linear-gradient(135deg, var(--br-red) 0%, var(--br-red-dark) 100%);
            box-shadow: 0 4px 15px rgba(255, 51, 51, 0.3);
            border-radius: 16px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.2s;
        }
        .btn-main:active { transform: scale(0.96); box-shadow: 0 2px 8px rgba(255, 51, 51, 0.2); }

        .clicker-circle {
            width: 220px; height: 220px;
            border-radius: 50%;
            background: #000;
            border: 8px solid #111;
            box-shadow: 0 0 40px rgba(255, 51, 51, 0.1), inset 0 0 20px rgba(255, 255, 255, 0.05);
            display: flex; align-items: center; justify-content: center;
            margin: 30px auto;
            position: relative;
            cursor: pointer;
        }
        .clicker-circle::after {
            content: ''; position: absolute; inset: -4px; border-radius: 50%;
            background: linear-gradient(45deg, transparent 40%, var(--br-red) 50%, transparent 60%);
            opacity: 0.3; animation: rotate 4s linear infinite;
        }
        @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #222; border-radius: 10px; }

        input, select { 
            background: rgba(0,0,0,0.5); 
            border: 1px solid #222; 
            color: #fff; 
            padding: 14px; 
            border-radius: 16px; 
            width: 100%; 
            outline: none; 
            font-weight: 600;
        }
        input:focus { border-color: var(--br-red); }
    </style>
</head>
<body>

<div class="max-w-md mx-auto h-full flex flex-col p-6">
    <header class="flex justify-between items-center mb-8">
        <div>
            <p class="text-[10px] text-gray-500 font-extrabold uppercase tracking-[0.2em] mb-1">–ë–∞–ª–∞–Ω—Å ‚ÇΩ</p>
            <p id="m-rub" class="text-3xl font-black italic tracking-tighter">0 ‚ÇΩ</p>
        </div>
        <div class="text-right">
            <p class="text-[10px] text-blue-500 font-extrabold uppercase tracking-[0.2em] mb-1">–î–æ–Ω–∞—Ç BC</p>
            <p id="m-bc" class="text-3xl font-black italic text-blue-400 tracking-tighter">0</p>
        </div>
    </header>

    <main class="flex-1">
        <div id="tab-home" class="tab-content active text-center">
            <div class="clicker-circle" onclick="Game.click()">
                <span class="text-7xl font-black text-red-600 italic relative z-10">BR</span>
            </div>
            
            <div class="glass p-5 mt-10 text-left">
                <div class="flex justify-between items-end mb-4">
                    <p class="text-[10px] text-blue-500 font-bold uppercase italic">–û–±–º–µ–Ω –≤–∞–ª—é—Ç—ã</p>
                    <p class="text-[9px] text-gray-500 font-bold italic">–ö–£–†–°: 1.000.000 ‚ÇΩ = 1 BC</p>
                </div>
                <div class="flex gap-3">
                    <input id="ex-val" type="number" placeholder="–°—É–º–º–∞ ‚ÇΩ">
                    <button onclick="Game.exchange()" class="btn-main px-6 text-[10px]">–û–±–º–µ–Ω</button>
                </div>
            </div>
        </div>

        <div id="tab-cases" class="tab-content space-y-4">
            <div class="glass p-6 border-l-4 border-green-500 flex justify-between items-center">
                <div>
                    <h3 class="font-black text-sm uppercase">–•–∞–ª—è–≤–∞</h3>
                    <p class="text-[10px] text-gray-400 italic">–ù–∞–≥—Ä–∞–¥–∞: 25-100 BC –∑–∞ 1 ADS</p>
                </div>
                <button onclick="Game.watchAd('lite')" class="btn-main px-5 py-2 text-[9px] !bg-green-600">–û—Ç–∫—Ä—ã—Ç—å</button>
            </div>

            <div class="glass p-6 border-l-4 border-blue-600 flex justify-between items-center">
                <div>
                    <h3 class="font-black text-sm uppercase">–ú–∞–∂–æ—Ä</h3>
                    <p id="ad-prog" class="text-[10px] text-gray-400 italic font-bold">–ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–µ–∫–ª–∞–º—ã: 0/5</p>
                </div>
                <button onclick="Game.watchAd('major')" class="btn-main px-5 py-2 text-[9px] !bg-blue-600">–°–º–æ—Ç—Ä–µ—Ç—å</button>
            </div>

            <div class="glass p-6">
                <h3 class="font-black text-sm uppercase text-red-500 mb-3">–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞ (+50 BC)</h3>
                <div class="flex gap-2 mb-3">
                    <input id="ref-link" readonly class="text-[10px]" value="–ó–∞–≥—Ä—É–∑–∫–∞...">
                    <button onclick="Game.copyRef()" class="btn-main px-4 py-2 text-[8px]">–ö–æ–ø–∏—è</button>
                </div>
                <div id="ref-list" class="space-y-2 mt-4 max-h-32 overflow-y-auto"></div>
            </div>
        </div>

        <div id="tab-out" class="tab-content space-y-6">
            <div class="glass p-6 space-y-4">
                <h2 class="text-center font-black italic text-red-500 uppercase tracking-widest">–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</h2>
                <input id="out-nick" type="text" placeholder="–ò–≥—Ä–æ–≤–æ–π –Ω–∏–∫ (Nick_Name)">
                <select id="out-srv">
                    </select>
                <input id="out-sum" type="number" placeholder="–°—É–º–º–∞ BC (–ú–∏–Ω. 50)">
                <button onclick="Game.withdraw()" class="btn-main w-full py-4 text-xs">–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É</button>
            </div>
            
            <div>
                <p class="text-[10px] text-gray-500 font-bold uppercase italic mb-3 ml-2">–ò—Å—Ç–æ—Ä–∏—è –≤–∞—à–∏—Ö –≤—ã–ø–ª–∞—Ç</p>
                <div id="out-history" class="space-y-3"></div>
            </div>
        </div>
    </main>

    <nav class="glass flex justify-around py-4 mt-4">
        <button onclick="Game.tab('home')" id="n-home" class="flex flex-col items-center gap-1 text-gray-600 nav-active">
            <span class="text-xl">‚ö°</span><span class="text-[8px] font-black uppercase">–ò–≥—Ä–∞</span>
        </button>
        <button onclick="Game.tab('cases')" id="n-cases" class="flex flex-col items-center gap-1 text-gray-600">
            <span class="text-xl">üì¶</span><span class="text-[8px] font-black uppercase">–ö–µ–π—Å—ã</span>
        </button>
        <button onclick="Game.tab('out')" id="n-out" class="flex flex-col items-center gap-1 text-gray-600">
            <span class="text-xl">üí≥</span><span class="text-[8px] font-black uppercase">–í—ã–≤–æ–¥</span>
        </button>
    </nav>
</div>

<script>
// FIREBASE CONFIG
const firebaseConfig = {
  apiKey: "AIzaSyA4zMBfNc1wTIN75Qr1KMBTrlgiU5qG-fA",
  authDomain: "locus-gold-game.firebaseapp.com",
  projectId: "locus-gold-game",
  storageBucket: "locus-gold-game.firebasestorage.app",
  messagingSenderId: "450338666762",
  appId: "1:450338666762:web:f40ef7268c539ef16662f3"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// ID –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram –∏–ª–∏ —Ç–µ—Å—Ç–æ–≤—ã–π ID)
const userId = new URLSearchParams(window.location.search).get('id') || "user_" + Math.floor(Math.random() * 9999);

// –í–°–ï 90 –°–ï–†–í–ï–†–û–í
const SERVERS = [
    "RED [01]", "GREEN [02]", "BLUE [03]", "YELLOW [04]", "ORANGE [05]", "PURPLE [06]", "LIME [07]", "PINK [08]", "CHERRY [09]", "BLACK [10]", 
    "INDIGO [11]", "WHITE [12]", "MAGENTA [13]", "CRIMSON [14]", "GOLD [15]", "AZURE [16]", "PLATINUM [17]", "AQUA [18]", "GRAY [19]", "ICE [20]", 
    "CHILLI [21]", "CHOCO [22]", "MOSCOW [23]", "SPB [24]", "UFA [25]", "SOCHI [26]", "KAZAN [27]", "SAMARA [28]", "ROSTOV [29]", "ANAPA [30]", 
    "EKATERINBURG [31]", "KRASNODAR [32]", "ARZAMAS [33]", "NOVOSIBIRSK [34]", "GROZNY [35]", "SARATOV [36]", "OMSK [37]", "IRKUTSK [38]", "VOLGOGRAD [39]", "VORONEZH [40]", 
    "BELGOROD [41]", "MAKHACHKALA [42]", "VLADIKAVKAZ [43]", "VLADIVOSTOK [44]", "KALININGRAD [45]", "CHELYABINSK [46]", "KRASNOYARSK [47]", "CHEBOKSARY [48]", "KHABAROVSK [49]", "PERM [50]", 
    "TULA [51]", "RYAZAN [52]", "MURMANSK [53]", "PENZA [54]", "KURSK [55]", "ARKHANGELSK [56]", "ORENBURG [57]", "KIROV [58]", "KEMEROVO [59]", "TYUMEN [60]", 
    "TOLYATTI [61]", "IVANOVO [62]", "STAVROPOL [63]", "SMOLENSK [64]", "PSKOV [65]", "BRYANSK [66]", "OREL [67]", "YAROSLAVL [68]", "BARNAUL [69]", "LIPETSK [70]", 
    "ULYANOVSK [71]", "YAKUTSK [72]", "TAMBOV [73]", "BRATSK [74]", "ASTRAKHAN [75]", "CHITA [76]", "KOSTROMA [77]", "VLADIMIR [78]", "KALUGA [79]", "N.NOVGOROD [80]", 
    "TAGANROG [81]", "VOLOGDA [82]", "TVER [83]", "TOMSK [84]", "IZHEVSK [85]", "SURGUT [86]", "PODOLSK [87]", "MAGADAN [88]", "CHEREPOVETS [89]", "NORILSK [90]"
];

const Game = {
    u: { m: 0, bc: 0, adM: 0, invitedBy: null },
    
    init() {
        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        db.ref('users/' + userId).on('value', (s) => {
            if(s.exists()) this.u = { ...this.u, ...s.val() };
            this.updateUI();
        });

        // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–≤
        const sel = document.getElementById('out-srv');
        SERVERS.forEach(x => { sel.innerHTML += `<option value="${x}">${x}</option>`; });

        // –†–µ—Ñ. —Å—Å—ã–ª–∫–∞
        document.getElementById('ref-link').value = `https://t.me/–¢–í–û–ô_–ë–û–¢?start=${userId}`;
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞
        const refId = new URLSearchParams(window.location.search).get('start');
        if(refId && refId !== userId) this.checkReferral(refId);

        this.loadHistory();
        this.loadRefs();
    },

    updateUI() {
        document.getElementById('m-rub').innerText = Math.floor(this.u.m).toLocaleString() + ' ‚ÇΩ';
        document.getElementById('m-bc').innerText = this.u.bc.toLocaleString();
        document.getElementById('ad-prog').innerText = `–ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–µ–∫–ª–∞–º—ã: ${this.u.adM || 0}/5`;
    },

    save() { db.ref('users/' + userId).update(this.u); },

    click() { this.u.m += 500; this.save(); },

    tab(id) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('nav button').forEach(n => n.classList.remove('nav-active'));
        document.getElementById('tab-'+id).classList.add('active');
        document.getElementById('n-'+id).classList.add('nav-active');
    },

    async watchAd(type) {
        try {
            const ad = window.Adsgram.init({ blockId: "20963" });
            const res = await ad.show();
            if(res.done) {
                if(type === 'lite') {
                    const win = Math.floor(Math.random() * 75) + 25;
                    this.u.bc += win; alert(`–í—ã–ø–∞–ª–æ: ${win} BC!`);
                } else {
                    this.u.adM = (this.u.adM || 0) + 1;
                    if(this.u.adM >= 5) {
                        this.u.adM = 0; const win = Math.floor(Math.random() * 150) + 50;
                        this.u.bc += win; alert(`–ú–∞–∂–æ—Ä –ö–µ–π—Å: +${win} BC!`);
                    }
                }
                if(this.u.invitedBy) this.updateRefProgress();
                this.save();
            }
        } catch(e) { alert("–†–µ–∫–ª–∞–º–∞ –Ω–µ –≥–æ—Ç–æ–≤–∞"); }
    },

    checkReferral(refId) {
        db.ref('users/' + userId).once('value', (s) => {
            if(!s.exists()) {
                this.u.invitedBy = refId;
                db.ref('referrals/' + refId + '/' + userId).set({ ads: 0, done: false });
                this.save();
            }
        });
    },

    updateRefProgress() {
        const path = `referrals/${this.u.invitedBy}/${userId}`;
        db.ref(path).once('value', (s) => {
            if(s.exists()) {
                let d = s.val();
                if(!d.done) {
                    d.ads++;
                    if(d.ads >= 3) {
                        d.done = true;
                        db.ref(`users/${this.u.invitedBy}/bc`).transaction(bc => (bc || 0) + 50);
                    }
                    db.ref(path).set(d);
                }
            }
        });
    },

    loadRefs() {
        db.ref('referrals/' + userId).on('value', (s) => {
            const div = document.getElementById('ref-list');
            div.innerHTML = '';
            s.forEach(c => {
                const d = c.val();
                div.innerHTML += `<div class="glass !bg-black/20 p-3 flex justify-between text-[10px]">
                    <span class="text-gray-400 italic">ID: ...${c.key.slice(-4)}</span>
                    <span class="${d.done ? 'text-green-500' : 'text-yellow-500'} font-bold">
                        ${d.done ? '‚úÖ +50 BC' : '‚è≥ –†–µ–∫–ª–∞–º–∞: ' + d.ads + '/3'}
                    </span>
                </div>`;
            });
        });
    },

    exchange() {
        const v = parseInt(document.getElementById('ex-val').value);
        if(v >= 1000000 && this.u.m >= v) {
            this.u.m -= v; this.u.bc += Math.floor(v/1000000); this.save();
            alert("–û–±–º–µ–Ω —É—Å–ø–µ—à–µ–Ω!");
        } else alert("–ú–∏–Ω–∏–º—É–º 1.000.000 ‚ÇΩ");
    },

    withdraw() {
        const n = document.getElementById('out-nick').value, s = document.getElementById('out-srv').value, a = parseInt(document.getElementById('out-sum').value);
        if(n && a >= 50 && this.u.bc >= a) {
            this.u.bc -= a; this.save();
            db.ref('payouts/' + userId).push({ nick: n, srv: s, sum: a, status: "–í –æ–±—Ä–∞–±–æ—Ç–∫–µ", date: new Date().toLocaleDateString() });
            alert("–ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞!");
        } else alert("–û—à–∏–±–∫–∞: –ú–∏–Ω. 50 BC");
    },

    loadHistory() {
        db.ref('payouts/' + userId).on('value', (s) => {
            const h = document.getElementById('out-history');
            h.innerHTML = '';
            s.forEach(c => {
                const d = c.val();
                h.innerHTML += `<div class="glass p-4 flex justify-between items-center text-[10px]">
                    <div><p class="font-bold text-sm">${d.sum} BC</p><p class="text-gray-500">${d.srv}</p></div>
                    <div class="text-right"><p class="text-yellow-500 font-bold">${d.status}</p><p class="text-[8px] text-gray-700">${d.date}</p></div>
                </div>`;
            });
        });
    },

    copyRef() {
        const el = document.getElementById('ref-link');
        el.select(); document.execCommand('copy'); alert("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!");
    }
};

window.onload = () => Game.init();
</script>
</body>
</html>
