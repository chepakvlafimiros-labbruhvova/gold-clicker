<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Black Russia - Locus Gold Ultimate</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@700&family=Montserrat:wght@400;600;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --br-red: #ff3333;
            --br-blue: #0088ff;
            --bg-main: #0a0a0c;
            --bg-card: #141417;
            --text-gray: #7b7b7e;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: var(--bg-main);
            color: #ffffff;
            font-family: 'Montserrat', sans-serif;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
        }

        .oswald { font-family: 'Oswald', sans-serif; text-transform: uppercase; font-style: italic; }

        /* --- –ö–õ–ò–ö–ï–† –ò –ï–ì–û –≠–§–§–ï–ö–¢–´ --- */
        .click-area {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 350px;
        }

        .main-logo-btn {
            width: 240px;
            height: 240px;
            background: radial-gradient(circle, #1e1e22 0%, #000000 100%);
            border-radius: 50%;
            border: 8px solid #1a1a1d;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.05s cubic-bezier(0, 0, 0.2, 1);
            box-shadow: 0 10px 40px rgba(0,0,0,0.6), inset 0 0 20px rgba(255,51,51,0.05);
            z-index: 10;
        }

        .main-logo-btn:active { transform: scale(0.93); }

        .logo-glow {
            position: absolute;
            width: 260px;
            height: 260px;
            border-radius: 50%;
            border: 2px solid var(--br-red);
            opacity: 0.15;
            animation: pulse-ring 2s infinite;
        }

        @keyframes pulse-ring {
            0% { transform: scale(0.95); opacity: 0.2; }
            50% { opacity: 0.4; }
            100% { transform: scale(1.15); opacity: 0; }
        }

        /* --- –†–£–õ–ï–¢–ö–ê (–ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø) --- */
        .case-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.98);
            z-index: 999;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .roulette-container {
            position: relative;
            width: 100%;
            height: 140px;
            margin: 40px 0;
            overflow: hidden;
            background: #000;
            border-top: 1px solid rgba(255,255,255,0.05);
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .roulette-track {
            display: flex;
            position: absolute;
            height: 100%;
            left: 0;
            transition: transform 9s cubic-bezier(0.1, 0, 0.05, 1);
        }

        .roulette-item {
            min-width: 150px;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-right: 1px solid #111;
            background: linear-gradient(180deg, #141416 0%, #0a0a0b 100%);
        }

        .roulette-marker {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 3px;
            background: var(--br-red);
            box-shadow: 0 0 15px var(--br-red);
            z-index: 100;
            transform: translateX(-50%);
        }

        /* --- –ö–ù–û–ü–ö–ò –ò –°–ö–†–û–õ–õ --- */
        .btn-action {
            background: linear-gradient(90deg, #ff3333 0%, #cc0000 100%);
            border-radius: 12px;
            font-weight: 900;
            text-transform: uppercase;
            transition: 0.2s;
        }

        .btn-action:active { transform: scale(0.97); filter: brightness(1.2); }

        .custom-scroll::-webkit-scrollbar { width: 0px; }

        .tab-content { display: none; animation: slideUp 0.3s ease-out; }
        .tab-content.active { display: block; }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .nav-link.active { color: var(--br-red); }
        .nav-link.active .indicator { background: var(--br-red); box-shadow: 0 0 10px var(--br-red); }

        .car-card {
            background: var(--bg-card);
            border: 1px solid rgba(255,255,255,0.03);
            border-radius: 20px;
            padding: 15px;
            text-align: center;
        }
    </style>
</head>
<body>

<div class="max-w-md mx-auto h-screen flex flex-col relative">
    
    <header class="p-6 flex justify-between items-start z-50">
        <div>
            <p class="text-[10px] font-bold text-gray-500 uppercase italic tracking-widest">–ò–≥—Ä–æ–≤–æ–π –±–∞–ª–∞–Ω—Å</p>
            <p id="ui-money" class="text-3xl font-black italic oswald">0 ‚ÇΩ</p>
        </div>
        <div class="text-right">
            <p class="text-[10px] font-bold text-blue-500 uppercase italic tracking-widest">–î–æ–Ω–∞—Ç —Å—á—ë—Ç</p>
            <p id="ui-bc" class="text-3xl font-black italic text-blue-400 oswald">0 BC</p>
        </div>
    </header>

    <main class="flex-1 overflow-y-auto custom-scroll px-6 pb-24">
        
        <section id="view-home" class="tab-content active">
            <div class="click-area">
                <div class="logo-glow"></div>
                <div class="main-logo-btn" onclick="Core.handleClick(event)">
                    <img src="https://i.postimg.cc/0jM80f8X/br-logo.png" class="w-36 drop-shadow-2xl" onerror="this.src='https://gta-max.com/uploads/posts/2023-01/1672744747_logotip-black-russia.png'">
                    <p class="oswald text-[11px] mt-4 tracking-[0.4em] text-gray-400">Black Russia</p>
                </div>
            </div>
            
            <div class="mt-4 p-5 bg-white/5 rounded-3xl border border-white/5 space-y-4">
                <div class="flex justify-between items-center">
                    <span class="oswald text-xs italic text-blue-400">–û–±–º–µ–Ω –≤–∞–ª—é—Ç—ã</span>
                    <span class="text-[9px] text-gray-500 uppercase">–ö—É—Ä—Å: 1.000.000 ‚ÇΩ = 1 BC</span>
                </div>
                <div class="flex gap-2">
                    <input id="exchange-input" type="number" placeholder="–°—É–º–º–∞ ‚ÇΩ" class="flex-1 bg-black/40 border border-white/10 p-3 rounded-xl text-xs outline-none focus:border-blue-500 transition-all">
                    <button onclick="Core.exchange()" class="bg-blue-600 px-6 rounded-xl text-[10px] font-black uppercase">–û–±–º–µ–Ω</button>
                </div>
            </div>
        </section>

        <section id="view-cases" class="tab-content space-y-4">
            <h2 class="oswald text-2xl italic mb-6">–ö–µ–π—Å—ã —Å –ø—Ä–∏–∑–∞–º–∏</h2>
            
            <div class="car-card flex justify-between items-center">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-red-600/10 rounded-2xl flex items-center justify-center text-2xl">üéÅ</div>
                    <div>
                        <p class="font-bold text-sm">–ï–ñ–ï–î–ù–ï–í–ù–´–ô</p>
                        <p id="daily-status" class="text-[10px] text-green-500 uppercase font-bold">–ì–æ—Ç–æ–≤</p>
                    </div>
                </div>
                <button onclick="Core.tryOpenCase('daily')" class="btn-action px-6 py-3 text-[10px]">–û—Ç–∫—Ä—ã—Ç—å</button>
            </div>

            <div class="car-card flex justify-between items-center border-l-4 border-yellow-600">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-yellow-600/10 rounded-2xl flex items-center justify-center text-2xl">üí∞</div>
                    <div>
                        <p class="font-bold text-sm">–ù–û–í–ò–ß–û–ö</p>
                        <p class="text-[10px] text-gray-500 uppercase">–¶–µ–Ω–∞: 100.000 ‚ÇΩ</p>
                    </div>
                </div>
                <button onclick="Core.buyCase(100000, 'bronze')" class="bg-white/10 hover:bg-white/20 px-6 py-3 rounded-xl text-[10px] font-black uppercase transition-all">–ö—É–ø–∏—Ç—å</button>
            </div>

            <div class="car-card flex justify-between items-center border-l-4 border-purple-600">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-purple-600/10 rounded-2xl flex items-center justify-center text-2xl">üèéÔ∏è</div>
                    <div>
                        <p class="font-bold text-sm italic">–ú–ê–ì–ù–ê–¢</p>
                        <p class="text-[10px] text-gray-500 uppercase">–¶–µ–Ω–∞: 1.000.000 ‚ÇΩ</p>
                    </div>
                </div>
                <button onclick="Core.buyCase(1000000, 'gold')" class="bg-purple-600/20 text-purple-400 px-6 py-3 rounded-xl text-[10px] font-black uppercase transition-all">–ö—É–ø–∏—Ç—å</button>
            </div>
            
            <div class="car-card flex justify-between items-center border-l-4 border-blue-600">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-blue-600/10 rounded-2xl flex items-center justify-center text-2xl">üíé</div>
                    <div>
                        <p class="font-bold text-sm">BLACK –ú–ê–ñ–û–†</p>
                        <p id="ad-info" class="text-[10px] text-blue-400 uppercase font-bold">–†–µ–∫–ª–∞–º–∞: 0 / 5</p>
                    </div>
                </div>
                <button onclick="Core.watchAd()" class="bg-blue-600 px-6 py-3 rounded-xl text-[10px] font-black uppercase shadow-lg shadow-blue-900/20">–°–º–æ—Ç—Ä–µ—Ç—å</button>
            </div>
        </section>

        <section id="view-garage" class="tab-content">
            <h2 class="oswald text-2xl italic mb-6">–ú–æ–∏ –º–∞—à–∏–Ω—ã</h2>
            <div id="garage-grid" class="grid grid-cols-2 gap-4">
                </div>
        </section>

        <section id="view-withdraw" class="tab-content space-y-6">
            <div class="car-card space-y-5 p-6">
                <h3 class="oswald text-lg italic text-red-500 text-center tracking-widest">–í—ã–≤–æ–¥ Black Coins</h3>
                <input id="wd-nick" type="text" placeholder="–í–∞—à Nick_Name" class="w-full bg-black/40 border border-white/5 p-4 rounded-xl text-xs outline-none">
                <select id="wd-server" class="w-full bg-black/40 border border-white/5 p-4 rounded-xl text-xs oswald">
                    </select>
                <input id="wd-amount" type="number" placeholder="–°—É–º–º–∞ BC" class="w-full bg-black/40 border border-white/5 p-4 rounded-xl text-xs outline-none">
                <button onclick="Core.requestWithdraw()" class="btn-action w-full py-4 text-xs shadow-xl shadow-red-900/20">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å</button>
            </div>

            <div class="space-y-3">
                <p class="oswald text-[10px] text-gray-500 uppercase tracking-widest">–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</p>
                <div id="wd-log" class="space-y-2">
                    </div>
            </div>
        </section>

    </main>

    <div id="case-modal" class="case-overlay">
        <h2 id="modal-title" class="oswald text-2xl tracking-[0.4em] text-gray-400">–£–¥–∞—á–∞...</h2>
        
        <div class="roulette-container">
            <div class="roulette-marker"></div>
            <div id="track" class="roulette-track"></div>
        </div>

        <div id="win-screen" class="hidden flex flex-col items-center animate-bounce">
            <p class="text-gray-500 text-[10px] font-bold uppercase mb-2">–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</p>
            <h3 id="win-name" class="oswald text-3xl text-white mb-8 text-center px-4">---</h3>
            <button onclick="Core.closeCase()" class="btn-action px-16 py-4 text-[11px] tracking-widest rounded-full">–ó–∞–±—Ä–∞—Ç—å –≤ –≥–∞—Ä–∞–∂</button>
        </div>
    </div>

    <nav class="fixed bottom-0 left-0 right-0 bg-[#08080a]/95 backdrop-blur-xl border-t border-white/5 flex justify-around py-4 z-[100]">
        <div onclick="Core.tab('home')" id="nav-home" class="nav-link active flex flex-col items-center gap-1 cursor-pointer">
            <span class="text-xl">üè†</span><span class="text-[9px] font-black uppercase">–ì–ª–∞–≤–Ω–∞—è</span>
            <div class="indicator w-1 h-1 rounded-full mt-1"></div>
        </div>
        <div onclick="Core.tab('cases')" id="nav-cases" class="nav-link flex flex-col items-center gap-1 cursor-pointer">
            <span class="text-xl">üì¶</span><span class="text-[9px] font-black uppercase">–ö–µ–π—Å—ã</span>
            <div class="indicator w-1 h-1 rounded-full mt-1"></div>
        </div>
        <div onclick="Core.tab('garage')" id="nav-garage" class="nav-link flex flex-col items-center gap-1 cursor-pointer">
            <span class="text-xl">üèéÔ∏è</span><span class="text-[9px] font-black uppercase">–ì–∞—Ä–∞–∂</span>
            <div class="indicator w-1 h-1 rounded-full mt-1"></div>
        </div>
        <div onclick="Core.tab('withdraw')" id="nav-withdraw" class="nav-link flex flex-col items-center gap-1 cursor-pointer">
            <span class="text-xl">üí≥</span><span class="text-[9px] font-black uppercase">–í—ã–≤–æ–¥</span>
            <div class="indicator w-1 h-1 rounded-full mt-1"></div>
        </div>
    </nav>
</div>

<script>
/**
 * –°–ï–†–í–ï–†–ê BLACK RUSSIA (90 –®–¢–£–ö)
 */
const SERVERS = ["RED [1]", "GREEN [2]", "BLUE [3]", "YELLOW [4]", "ORANGE [5]", "PURPLE [6]", "LIME [7]", "PINK [8]", "CHERRY [9]", "BLACK [10]", "INDIGO [11]", "WHITE [12]", "MAGENTA [13]", "CRIMSON [14]", "GOLD [15]", "AZURE [16]", "PLATINUM [17]", "AQUA [18]", "GRAY [19]", "ICE [20]", "CHILLI [21]", "CHOCO [22]", "MOSCOW [23]", "SPB [24]", "UFA [25]", "SOCHI [26]", "KAZAN [27]", "SAMARA [28]", "ROSTOV [29]", "ANAPA [30]", "EKATERINBURG [31]", "KRASNODAR [32]", "ARZAMAS [33]", "NOVOSIBIRSK [34]", "GROZNY [35]", "SARATOV [36]", "OMSK [37]", "IRKUTSK [38]", "VOLGOGRAD [39]", "VORONEZH [40]", "BELGOROD [41]", "MAKHACHKALA [42]", "VLADIKAVKAZ [43]", "VLADIVOSTOK [44]", "KALININGRAD [45]", "CHELYABINSK [46]", "KRASNOYARSK [47]", "CHEBOKSARY [48]", "KHABAROVSK [49]", "PERM [50]", "TULA [51]", "RYAZAN [52]", "MURMANSK [53]", "PENZA [54]", "KURSK [55]", "ARKHANGELSK [56]", "ORENBURG [57]", "KIROV [58]", "KEMEROVO [59]", "TYUMEN [60]", "TOLYATTI [61]", "IVANOVO [62]", "STAVROPOL [63]", "SMOLENSK [64]", "PSKOV [65]", "BRYANSK [66]", "OREL [67]", "YAROSLAVL [68]", "BARNAUL [69]", "LIPETSK [70]", "ULYANOVSK [71]", "YAKUTSK [72]", "TAMBOV [73]", "BRATSK [74]", "ASTRAKHAN [75]", "CHITA [76]", "KOSTROMA [77]", "VLADIMIR [78]", "KALUGA [79]", "N.NOVGOROD [80]", "TAGANROG [81]", "VOLOGDA [82]", "TVER [83]", "TOMSK [84]", "IZHEVSK [85]", "SURGUT [86]", "PODOLSK [87]", "MAGADAN [88]", "CHEREPOVETS [89]", "NORILSK [90]"];

/**
 * –ü–†–ò–ó–´ –ò –®–ê–ù–°–´
 */
const DROP_POOLS = {
    daily: [
        { name: "Lada Vesta", cost: 800000, icon: "üèéÔ∏è", type: "car" },
        { name: "50.000 ‚ÇΩ", val: 50000, icon: "üíµ", type: "money" },
        { name: "ZAZ 968", cost: 20000, icon: "üèéÔ∏è", type: "car" }
    ],
    bronze: [
        { name: "VAZ 2107", cost: 150000, icon: "üèéÔ∏è", type: "car" },
        { name: "VAZ 2114", cost: 280000, icon: "üèéÔ∏è", type: "car" },
        { name: "100.000 ‚ÇΩ", val: 100000, icon: "üíµ", type: "money" }
    ],
    gold: [
        { name: "BMW M5 F90", cost: 9500000, icon: "üèéÔ∏è", type: "car" },
        { name: "Mercedes G63", cost: 25000000, icon: "üèéÔ∏è", type: "car" },
        { name: "1.000.000 ‚ÇΩ", val: 1000000, icon: "üíµ", type: "money" }
    ],
    ad: [
        { name: "500 BC", val: 500, icon: "üíé", type: "bc" },
        { name: "BMW M5 E60", cost: 4500000, icon: "üèéÔ∏è", type: "car" },
        { name: "Audi RS6", cost: 15000000, icon: "üèéÔ∏è", type: "car" }
    ]
};

/**
 * –Ø–î–†–û –°–ò–°–¢–ï–ú–´ (CORE)
 */
const Core = {
    data: {
        money: 0,
        bc: 0,
        ads: 0,
        lastDaily: 0,
        inventory: [],
        history: []
    },

    init() {
        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        const saved = localStorage.getItem('br_user_ultimate_v1');
        if (saved) this.data = JSON.parse(saved);

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤
        const s = document.getElementById('wd-server');
        SERVERS.forEach(srv => {
            const opt = document.createElement('option');
            opt.value = srv; opt.innerText = srv;
            s.appendChild(opt);
        });

        this.updateUI();
        setInterval(() => this.tick(), 1000);
    },

    save() {
        localStorage.setItem('br_user_ultimate_v1', JSON.stringify(this.data));
    },

    updateUI() {
        document.getElementById('ui-money').innerText = this.data.money.toLocaleString() + ' ‚ÇΩ';
        document.getElementById('ui-bc').innerText = this.data.bc.toLocaleString() + ' BC';
        document.getElementById('ad-info').innerText = `–†–µ–∫–ª–∞–º–∞: ${this.data.ads} / 5`;
        
        // –ì–∞—Ä–∞–∂
        const grid = document.getElementById('garage-grid');
        grid.innerHTML = '';
        if (this.data.inventory.length === 0) {
            grid.innerHTML = '<div class="col-span-2 text-center text-gray-600 text-[10px] py-10 uppercase tracking-widest">–ì–∞—Ä–∞–∂ –ø—É—Å—Ç</div>';
        }
        this.data.inventory.forEach((item, idx) => {
            grid.innerHTML += `
                <div class="car-card flex flex-col items-center">
                    <span class="text-3xl mb-2">${item.icon}</span>
                    <p class="font-black text-[10px] uppercase truncate w-full mb-1">${item.name}</p>
                    <p class="text-[9px] text-gray-500 mb-3">${item.cost.toLocaleString()} ‚ÇΩ</p>
                    <button onclick="Core.sellCar(${idx})" class="w-full py-2 bg-white/5 text-red-500 font-bold text-[8px] uppercase rounded-lg">–ü—Ä–æ–¥–∞—Ç—å</button>
                </div>`;
        });

        // –ò—Å—Ç–æ—Ä–∏—è –≤—ã–≤–æ–¥–∞
        const log = document.getElementById('wd-log');
        log.innerHTML = '';
        if (this.data.history.length === 0) {
            log.innerHTML = '<p class="text-center text-gray-700 text-[9px] py-4 uppercase">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</p>';
        }
        this.data.history.slice().reverse().forEach(entry => {
            log.innerHTML += `
                <div class="bg-white/5 p-3 rounded-xl border border-white/5 flex justify-between items-center">
                    <div class="text-[9px]">
                        <p class="font-bold text-white uppercase">${entry.nick}</p>
                        <p class="text-gray-500">${entry.server}</p>
                    </div>
                    <div class="text-right">
                        <p class="font-black text-blue-400">${entry.amount} BC</p>
                        <p class="text-[7px] text-green-500 font-bold uppercase">–í –æ–±—Ä–∞–±–æ—Ç–∫–µ</p>
                    </div>
                </div>`;
        });
    },

    tab(id) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.nav-link').forEach(n => n.classList.remove('active'));
        document.getElementById('view-' + id).classList.add('active');
        document.getElementById('nav-' + id).classList.add('active');
    },

    handleClick(e) {
        // –°–∏–ª–∞ –∫–ª–∏–∫–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–∞—à–∏–Ω –≤ –≥–∞—Ä–∞–∂–µ (–±–æ–Ω—É—Å)
        const power = 150 + (this.data.inventory.length * 20);
        this.data.money += power;
        this.updateUI();
        this.save();

        // –≠—Ñ—Ñ–µ–∫—Ç —Ü–∏—Ñ—Ä –ø—Ä–∏ –∫–ª–∏–∫–µ
        const float = document.createElement('div');
        float.innerText = `+${power}`;
        float.className = 'fixed font-black oswald text-white pointer-events-none z-[200]';
        float.style.left = e.clientX + 'px';
        float.style.top = e.clientY + 'px';
        document.body.appendChild(float);

        setTimeout(() => {
            float.style.transition = 'all 0.6s ease-out';
            float.style.transform = 'translateY(-60px)';
            float.style.opacity = '0';
            setTimeout(() => float.remove(), 600);
        }, 10);
    },

    exchange() {
        const input = document.getElementById('exchange-input');
        const val = parseInt(input.value);
        if (isNaN(val) || val < 1000000) return alert("–ú–∏–Ω–∏–º—É–º 1.000.000 ‚ÇΩ");
        if (this.data.money < val) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥");

        this.data.money -= val;
        this.data.bc += Math.floor(val / 1000000);
        input.value = '';
        this.updateUI();
        this.save();
    },

    buyCase(cost, pool) {
        if (this.data.money < cost) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤");
        this.data.money -= cost;
        this.updateUI();
        this.roll(pool);
    },

    tryOpenCase(type) {
        if (type === 'daily') {
            const now = Date.now();
            if (now - this.data.lastDaily < 86400000) return alert("–ñ–¥–∏—Ç–µ 24 —á–∞—Å–∞!");
            this.data.lastDaily = now;
        }
        this.roll(type);
    },

    watchAd() {
        this.data.ads++;
        if (this.data.ads >= 5) {
            this.data.ads = 0;
            this.roll('ad');
        }
        this.updateUI();
        this.save();
        alert("–†–µ–∫–ª–∞–º–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–∞!");
    },

    roll(poolKey) {
        const pool = DROP_POOLS[poolKey];
        const modal = document.getElementById('case-modal');
        const track = document.getElementById('track');
        const winUI = document.getElementById('win-screen');
        
        modal.style.display = 'flex';
        winUI.classList.add('hidden');
        document.getElementById('modal-title').innerText = "–£–î–ê–ß–ê...";
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–µ–Ω—Ç—ã
        track.style.transition = 'none';
        track.style.transform = 'translateX(0)';
        track.innerHTML = '';
        
        const cards = [];
        for (let i = 0; i < 70; i++) {
            const item = pool[Math.floor(Math.random() * pool.length)];
            cards.push(item);
            const div = document.createElement('div');
            div.className = 'roulette-item';
            div.innerHTML = `<span class="text-3xl mb-1">${item.icon}</span><p class="text-[8px] uppercase font-bold text-gray-500 px-2 text-center">${item.name}</p>`;
            track.appendChild(div);
        }

        const winIdx = 65; // –í—ã–∏–≥—Ä—ã—à–Ω—ã–π –∏–Ω–¥–µ–∫—Å
        this.currentPrize = cards[winIdx];

        // –ó–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏
        setTimeout(() => {
            track.style.transition = 'transform 9s cubic-bezier(0.1, 0, 0.05, 1)';
            const cardWidth = 150;
            const centerOffset = window.innerWidth / 2;
            const finalPos = (winIdx * cardWidth) - centerOffset + (cardWidth / 2);
            track.style.transform = `translateX(-${finalPos}px)`;
        }, 50);

        setTimeout(() => {
            winUI.classList.remove('hidden');
            document.getElementById('win-name').innerText = this.currentPrize.name;
        }, 9500);
    },

    closeCase() {
        const p = this.currentPrize;
        if (p.type === 'car') this.data.inventory.push(p);
        else if (p.type === 'money') this.data.money += p.val;
        else if (p.type === 'bc') this.data.bc += p.val;

        document.getElementById('case-modal').style.display = 'none';
        this.updateUI();
        this.save();
    },

    sellCar(idx) {
        const car = this.data.inventory[idx];
        this.data.money += car.cost;
        this.data.inventory.splice(idx, 1);
        this.updateUI();
        this.save();
    },

    requestWithdraw() {
        const nick = document.getElementById('wd-nick').value;
        const srv = document.getElementById('wd-server').value;
        const amount = parseInt(document.getElementById('wd-amount').value);

        if (nick.length < 3) return alert("–í–≤–µ–¥–∏—Ç–µ Nick_Name");
        if (isNaN(amount) || amount <= 0) return alert("–ù–µ–≤–µ—Ä–Ω–∞—è —Å—É–º–º–∞");
        if (this.data.bc < amount) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ BC");

        this.data.bc -= amount;
        this.data.history.push({
            nick: nick,
            server: srv,
            amount: amount,
            date: Date.now()
        });

        document.getElementById('wd-amount').value = '';
        this.updateUI();
        this.save();
        alert("–ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞!");
    },

    tick() {
        // –¢–∞–π–º–µ—Ä –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –∫–µ–π—Å–∞
        const diff = 86400000 - (Date.now() - this.data.lastDaily);
        const el = document.getElementById('daily-status');
        if (diff > 0) {
            const h = Math.floor(diff / 3600000);
            const m = Math.floor((diff % 3600000) / 60000);
            const s = Math.floor((diff % 60000) / 1000);
            el.innerText = `${h}:${m}:${s}`;
            el.classList.replace('text-green-500', 'text-gray-500');
        } else {
            el.innerText = "–ì–û–¢–û–í";
            el.classList.replace('text-gray-500', 'text-green-500');
        }
    }
};

// –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
window.onload = () => Core.init();
</script>
</body>
</html>
