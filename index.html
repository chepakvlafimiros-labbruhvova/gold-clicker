<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BLACK RUSSIA ULTIMATE - 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --br-red: #ff1f1f;
            --br-gold: #ffcc00;
            --br-blue: #0088ff;
            --bg-main: #0a0a0c;
        }

        body {
            background-color: var(--bg-main);
            color: #ffffff;
            font-family: 'Montserrat', sans-serif;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –ø—É–ª—å—Å–∞—Ü–∏–∏ –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ –ª–æ–≥–æ */
        @keyframes pulse-red {
            0% { filter: drop-shadow(0 0 15px rgba(255, 31, 31, 0.4)); transform: scale(1); }
            50% { filter: drop-shadow(0 0 30px rgba(255, 31, 31, 0.7)); transform: scale(1.02); }
            100% { filter: drop-shadow(0 0 15px rgba(255, 31, 31, 0.4)); transform: scale(1); }
        }

        .main-logo-anim { animation: pulse-red 3s infinite ease-in-out; }

        /* –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å–∫—Ä–æ–ª–ª–±–∞—Ä—ã */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: #0a0a0c; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }

        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 20px;
        }

        .nav-item-active {
            color: var(--br-red);
            position: relative;
        }

        .nav-item-active::after {
            content: '';
            position: absolute;
            bottom: -8px;
            width: 20px;
            height: 3px;
            background: var(--br-red);
            border-radius: 10px;
        }

        /* –†—É–ª–µ—Ç–∫–∞ */
        .roulette-wrapper {
            position: relative;
            width: 100%;
            height: 140px;
            background: #111;
            border: 2px solid #222;
            overflow: hidden;
            border-radius: 15px;
        }

        .roulette-track {
            display: flex;
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            transition: transform 7s cubic-bezier(0.15, 0, 0.05, 1);
        }

        .prize-card {
            min-width: 130px;
            height: 100%;
            border-right: 1px solid #222;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(180deg, #1a1a1e 0%, #111114 100%);
        }

        .roulette-center {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 3px;
            background: var(--br-red);
            z-index: 20;
            box-shadow: 0 0 15px var(--br-red);
            transform: translateX(-50%);
        }

        .tab-pane { display: none; animation: fadeIn 0.4s ease; }
        .tab-pane.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .particle-text {
            position: absolute;
            font-weight: 900;
            pointer-events: none;
            z-index: 100;
            animation: float-up 0.8s ease-out forwards;
        }

        @keyframes float-up { 
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-120px) scale(1.5); opacity: 0; }
        }
    </style>
</head>
<body>

<div id="game-app" class="max-w-md mx-auto min-h-screen relative flex flex-col">
    
    <header class="p-6 flex justify-between items-center sticky top-0 z-[60] bg-[#0a0a0c]/80 backdrop-blur-md">
        <div>
            <h1 class="text-[10px] font-bold text-gray-500 uppercase tracking-tighter">–ù–∞ —Ä—É–∫–∞—Ö</h1>
            <p id="stat-money" class="text-2xl font-black text-white italic">0 ‚ÇΩ</p>
        </div>
        <div class="text-right">
            <h1 class="text-[10px] font-bold text-blue-500 uppercase tracking-tighter">–î–æ–Ω–∞—Ç —Å—á—ë—Ç</h1>
            <p id="stat-bc" class="text-2xl font-black text-blue-400 italic">0 BC</p>
        </div>
    </header>

    <div class="flex-1 px-4 pb-32 overflow-y-auto">
        
        <section id="pane-home" class="tab-pane active">
            <div class="flex flex-col items-center justify-center py-10 min-h-[400px]">
                <div id="main-click-area" class="relative cursor-pointer">
                    <img src="https://gta-max.com/uploads/posts/2023-01/1672744747_logotip-black-russia.png" class="w-64 main-logo-anim">
                    <div id="click-particles"></div>
                </div>
                <div class="mt-12 text-center glass-card p-4 w-full">
                    <p class="text-xs text-gray-400">–°–∏–ª–∞ –∫–ª–∏–∫–∞: <span id="click-power" class="text-white font-bold">150 ‚ÇΩ</span></p>
                    <div class="w-full bg-gray-800 h-1 mt-2 rounded-full overflow-hidden">
                        <div id="exp-bar" class="bg-red-600 h-full w-[20%]"></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="pane-cases" class="tab-pane">
            <h2 class="text-2xl font-black italic mb-6 border-l-4 border-red-600 pl-3">–û–¢–ö–†–´–¢–ò–ï –ö–ï–ô–°–û–í</h2>
            
            <div class="grid gap-4">
                <div class="glass-card p-5 flex items-center justify-between border-l-4 border-gray-600">
                    <div class="flex items-center gap-4">
                        <div class="text-3xl">üéÅ</div>
                        <div>
                            <h3 class="font-bold text-sm">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π</h3>
                            <p class="text-[10px] text-gray-400" id="timer-daily">–î–æ—Å—Ç—É–ø–µ–Ω —Å–µ–π—á–∞—Å</p>
                        </div>
                    </div>
                    <button onclick="openCaseLogic('daily')" id="btn-daily" class="bg-white text-black text-[10px] font-black px-4 py-2 rounded-lg uppercase">–û—Ç–∫—Ä—ã—Ç—å</button>
                </div>

                <div class="glass-card p-5 flex items-center justify-between border-l-4 border-green-600">
                    <div class="flex items-center gap-4">
                        <div class="text-3xl">üí∞</div>
                        <div>
                            <h3 class="font-bold text-sm">–ê–≤—Ç–æ—Å–∞–ª–æ–Ω –ù–∏–∑–∫–∏–π</h3>
                            <p class="text-[10px] text-green-500 font-bold">–¶–µ–Ω–∞: 50.000 ‚ÇΩ</p>
                        </div>
                    </div>
                    <button onclick="openCaseLogic('money')" class="bg-green-600 text-white text-[10px] font-black px-4 py-2 rounded-lg uppercase shadow-lg shadow-green-900/40">–ö—É–ø–∏—Ç—å</button>
                </div>

                <div class="glass-card p-5 flex items-center justify-between border-l-4 border-blue-600">
                    <div class="flex items-center gap-4">
                        <div class="text-3xl">üíé</div>
                        <div>
                            <h3 class="font-bold text-sm">–ö–µ–π—Å "–ú–∞–∂–æ—Ä"</h3>
                            <p id="ad-text-5" class="text-[10px] text-blue-400 italic">–†–µ–∫–ª–∞–º–∞: 0 / 5</p>
                        </div>
                    </div>
                    <button onclick="watchAdsAction(5)" class="bg-blue-600 text-white text-[10px] font-black px-4 py-2 rounded-lg uppercase">–°–º–æ—Ç—Ä–µ—Ç—å</button>
                </div>

                <div class="glass-card p-5 flex items-center justify-between border-l-4 border-yellow-600">
                    <div class="flex items-center gap-4">
                        <div class="text-3xl">üî•</div>
                        <div>
                            <h3 class="font-bold text-sm text-yellow-500">Black Russia Elite</h3>
                            <p id="ad-text-15" class="text-[10px] text-yellow-600 italic">–†–µ–∫–ª–∞–º–∞: 0 / 15</p>
                        </div>
                    </div>
                    <button onclick="watchAdsAction(15)" class="bg-yellow-600 text-black text-[10px] font-black px-4 py-2 rounded-lg uppercase">–°–º–æ—Ç—Ä–µ—Ç—å</button>
                </div>
            </div>
        </section>

        <section id="pane-garage" class="tab-pane">
            <h2 class="text-2xl font-black italic mb-6 border-l-4 border-red-600 pl-3">–ú–û–ò –ê–í–¢–û–ú–û–ë–ò–õ–ò</h2>
            <div id="inventory-grid" class="grid grid-cols-2 gap-3">
                </div>
        </section>

        <section id="pane-exchange" class="tab-pane">
            <h2 class="text-2xl font-black italic mb-2 border-l-4 border-blue-600 pl-3 uppercase">–§–∏–Ω–∞–Ω—Å—ã</h2>
            <p class="text-[10px] text-gray-500 mb-6 uppercase tracking-widest">–û–±–º–µ–Ω –≤–∞–ª—é—Ç—ã –∏ –≤—ã–≤–æ–¥ –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç</p>

            <div class="glass-card p-6 mb-6">
                <h3 class="text-sm font-black mb-4 flex items-center gap-2">
                    <span class="bg-blue-600 p-1 rounded">üí≥</span> –ö–£–†–°: 1.000.000 ‚ÇΩ = 1 BC
                </h3>
                <div class="space-y-4">
                    <input id="input-exchange" type="number" placeholder="–°—É–º–º–∞ ‚ÇΩ –¥–ª—è –æ–±–º–µ–Ω–∞" class="w-full bg-black/50 border border-white/10 p-4 rounded-xl text-white outline-none focus:border-blue-500 transition-all">
                    <button onclick="exchangeMoneyToBC()" class="w-full bg-blue-600 py-4 rounded-xl font-black text-sm uppercase hover:bg-blue-700 transition-all">–û–±–º–µ–Ω—è—Ç—å –Ω–∞ BC</button>
                </div>
            </div>

            <div class="glass-card p-6">
                <h3 class="text-sm font-black mb-4 flex items-center gap-2">
                    <span class="bg-green-600 p-1 rounded">üì§</span> –í–´–í–û–î BC –ù–ê –ê–ö–ö–ê–£–ù–¢
                </h3>
                <div class="space-y-4">
                    <input id="out-nickname" type="text" placeholder="–ò–≥—Ä–æ–≤–æ–π –ù–∏–∫ (Name_Surname)" class="w-full bg-black/50 border border-white/10 p-4 rounded-xl text-white outline-none focus:border-green-500">
                    <select id="out-serv" class="w-full bg-black/50 border border-white/10 p-4 rounded-xl text-white">
                        <option>01 - RED</option><option>02 - GREEN</option><option>03 - BLUE</option>
                        <option>10 - BLACK</option><option>20 - ARZAMAS</option><option>50 - MOSCOW</option>
                    </select>
                    <input id="out-sum-bc" type="number" placeholder="–°—É–º–º–∞ –≤ BC" class="w-full bg-black/50 border border-white/10 p-4 rounded-xl text-white outline-none">
                    <button onclick="requestWithdraw()" class="w-full bg-green-600 py-4 rounded-xl font-black text-sm uppercase">–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –≤—ã–≤–æ–¥</button>
                </div>
            </div>

            <div class="mt-8">
                <h4 class="text-[10px] font-bold text-gray-500 uppercase mb-3">–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</h4>
                <div id="withdraw-history" class="space-y-2"></div>
            </div>
        </section>
    </div>

    <nav class="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-[#0a0a0c]/90 backdrop-blur-xl border-t border-white/5 px-6 py-4 flex justify-between items-center z-[100]">
        <button onclick="switchTab('home')" class="flex flex-col items-center gap-1 nav-item nav-item-active" id="nav-home">
            <span class="text-xl">üè†</span>
            <span class="text-[8px] font-bold uppercase">–ö–ª–∏–∫–µ—Ä</span>
        </button>
        <button onclick="switchTab('cases')" class="flex flex-col items-center gap-1 text-gray-500 nav-item" id="nav-cases">
            <span class="text-xl">üì¶</span>
            <span class="text-[8px] font-bold uppercase">–ö–µ–π—Å—ã</span>
        </button>
        <button onclick="switchTab('garage')" class="flex flex-col items-center gap-1 text-gray-500 nav-item" id="nav-garage">
            <span class="text-xl">üèéÔ∏è</span>
            <span class="text-[8px] font-bold uppercase">–ì–∞—Ä–∞–∂</span>
        </button>
        <button onclick="switchTab('exchange')" class="flex flex-col items-center gap-1 text-gray-500 nav-item" id="nav-exchange">
            <span class="text-xl">üíé</span>
            <span class="text-[8px] font-bold uppercase">–ë–∏—Ä–∂–∞</span>
        </button>
    </nav>

    <div id="roulette-modal" class="fixed inset-0 bg-black/98 z-[200] hidden flex-col items-center justify-center p-6">
        <h2 id="roulette-title" class="text-xl font-black italic text-white mb-10 tracking-[0.2em]">–û–¢–ö–†–´–¢–ò–ï...</h2>
        
        <div class="roulette-wrapper">
            <div class="roulette-center"></div>
            <div id="roulette-track" class="roulette-track"></div>
        </div>

        <div id="reward-display" class="mt-12 text-center hidden scale-up">
            <p class="text-xs text-gray-400 uppercase tracking-widest mb-2">–í—ã –≤—ã–±–∏–ª–∏</p>
            <h3 id="reward-name" class="text-4xl font-black text-white italic mb-8">BMW M5 F90</h3>
            <button onclick="closeRoulette()" class="bg-red-600 text-white px-12 py-4 rounded-full font-black uppercase text-sm shadow-xl shadow-red-900/40">–ó–∞–±—Ä–∞—Ç—å –≤ –≥–∞—Ä–∞–∂</button>
        </div>
    </div>
</div>

<script>
/**
 * –ë–ê–ó–ê –î–ê–ù–ù–´–• –ü–†–ï–î–ú–ï–¢–û–í (–†–ê–°–®–ò–†–ï–ù–ù–ê–Ø –î–õ–Ø –û–ë–™–ï–ú–ê –ò –†–ê–ó–ù–û–û–ë–†–ê–ó–ò–Ø)
 * –ó–¥–µ—Å—å –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –º–∞—à–∏–Ω—ã, –∏—Ö —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏ —Ä–µ–¥–∫–æ—Å—Ç—å.
 */
const ITEMS_DB = {
    daily: [
        { n: "VAZ 2101", p: 30000, r: "common" },
        { n: "ZAZ 968", p: 15000, r: "common" },
        { n: "VAZ 2107", p: 80000, r: "common" },
        { n: "Lada Niva", p: 150000, r: "uncommon" },
        { n: "10.000 ‚ÇΩ", p: 10000, r: "money", isCash: true },
        { n: "25.000 ‚ÇΩ", p: 25000, r: "money", isCash: true }
    ],
    money: [
        { n: "Toyota Camry", p: 1200000, r: "rare" },
        { n: "Hyundai Solaris", p: 700000, r: "uncommon" },
        { n: "Volkswagen Polo", p: 600000, r: "uncommon" },
        { n: "Lada Vesta SW", p: 450000, r: "uncommon" },
        { n: "BMW E30", p: 400000, r: "rare" },
        { n: "Skoda Octavia", p: 900000, r: "rare" }
    ],
    normal: [
        { n: "BMW M5 E60", p: 2500000, r: "epic" },
        { n: "Mercedes W212", p: 3000000, r: "epic" },
        { n: "Audi A6", p: 2800000, r: "epic" },
        { n: "Toyota Land Cruiser 200", p: 5500000, r: "epic" },
        { n: "Infiniti QX80", p: 4500000, r: "rare" },
        { n: "100 BC", p: 100000000, r: "bc", isBC: true, bcVal: 100 }
    ],
    elite: [
        { n: "Lamborghini Aventador", p: 35000000, r: "legend" },
        { n: "Ferrari 488", p: 28000000, r: "legend" },
        { n: "Rolls-Royce Cullinan", p: 65000000, r: "legend" },
        { n: "Bugatti Chiron", p: 150000000, r: "legend" },
        { n: "Mercedes G63 AMG", p: 22000000, r: "legend" },
        { n: "BMW M5 F90", p: 10000000, r: "epic" },
        { n: "Tesla Model S", p: 8000000, r: "rare" },
        { n: "1.000 BC", p: 1000000000, r: "bc", isBC: true, bcVal: 1000 }
    ]
};

/** –ì–ï–ô–ú–ü–õ–ï–ô–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï */
let player = {
    money: 0,
    bc: 10,
    ads5: 0,
    ads15: 0,
    lastDaily: 0,
    garage: [],
    history: []
};

/** –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï */
function initGame() {
    const saved = localStorage.getItem('br_ultra_save');
    if (saved) player = JSON.parse(saved);
    
    updateStats();
    renderInventory();
    renderHistory();
    
    // –ò–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è —Ç–∞–π–º–µ—Ä–∞
    setInterval(updateTimer, 1000);
}

function saveGame() {
    localStorage.setItem('br_ultra_save', JSON.stringify(player));
}

function updateStats() {
    document.getElementById('stat-money').innerText = player.money.toLocaleString() + ' ‚ÇΩ';
    document.getElementById('stat-bc').innerText = player.bc.toLocaleString() + ' BC';
    document.getElementById('ad-text-5').innerText = `–†–µ–∫–ª–∞–º–∞: ${player.ads5} / 5`;
    document.getElementById('ad-text-15').innerText = `–†–µ–∫–ª–∞–º–∞: ${player.ads15} / 15`;
    
    const clickPower = 150 + (player.garage.length * 50); // –ë—É—Å—Ç –∫–ª–∏–∫–∞ –æ—Ç –º–∞—à–∏–Ω
    document.getElementById('click-power').innerText = clickPower.toLocaleString() + ' ‚ÇΩ';
}

/** –°–ò–°–¢–ï–ú–ê –ö–õ–ò–ö–ï–†–ê */
document.getElementById('main-click-area').addEventListener('click', (e) => {
    const power = 150 + (player.garage.length * 50);
    player.money += power;
    
    // –≠—Ñ—Ñ–µ–∫—Ç
    const p = document.createElement('div');
    p.className = 'particle-text';
    p.style.left = e.clientX + 'px';
    p.style.top = e.clientY + 'px';
    p.innerText = `+${power}`;
    p.style.color = player.money > 1000000 ? '#ffcc00' : '#ffffff';
    document.body.appendChild(p);
    setTimeout(() => p.remove(), 800);
    
    updateStats();
    saveGame();
});

/** –°–ò–°–¢–ï–ú–ê –û–ë–ú–ï–ù–ê –ò –í–´–í–û–î–ê (–ù–û–í–ê–Ø) */
function exchangeMoneyToBC() {
    const amount = parseInt(document.getElementById('input-exchange').value);
    const RATE = 1000000;
    
    if (isNaN(amount) || amount < RATE) {
        alert("–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –¥–ª—è –æ–±–º–µ–Ω–∞: 1.000.000 ‚ÇΩ");
        return;
    }
    
    if (player.money >= amount) {
        const bcGain = Math.floor(amount / RATE);
        const spent = bcGain * RATE;
        
        player.money -= spent;
        player.bc += bcGain;
        
        alert(`–£—Å–ø–µ—à–Ω—ã–π –æ–±–º–µ–Ω! –í—ã –ø–æ–ª—É—á–∏–ª–∏ ${bcGain} BC`);
        document.getElementById('input-exchange').value = '';
        updateStats();
        saveGame();
    } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä—É–±–ª–µ–π –Ω–∞ —Ä—É–∫–∞—Ö!");
    }
}

function requestWithdraw() {
    const nick = document.getElementById('out-nickname').value;
    const sum = parseInt(document.getElementById('out-sum-bc').value);
    const serv = document.getElementById('out-serv').value;
    
    if (nick.length < 3 || isNaN(sum) || sum < 1) {
        alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–∞–Ω–Ω—ã–µ!");
        return;
    }
    
    if (player.bc >= sum) {
        player.bc -= sum;
        player.history.unshift({
            date: new Date().toLocaleTimeString(),
            sum: sum,
            nick: nick,
            serv: serv,
            status: '–í –æ–±—Ä–∞–±–æ—Ç–∫–µ'
        });
        
        saveGame();
        updateStats();
        renderHistory();
        alert("–ó–∞—è–≤–∫–∞ –Ω–∞ –≤—ã–≤–æ–¥ BC –ø—Ä–∏–Ω—è—Ç–∞! –û–∂–∏–¥–∞–π—Ç–µ –∑–∞—á–∏—Å–ª–µ–Ω–∏—è.");
    } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ BC!");
    }
}

/** –°–ò–°–¢–ï–ú–ê –ö–ï–ô–°–û–í */
function openCaseLogic(type) {
    if (type === 'daily') {
        const now = Date.now();
        if (now - player.lastDaily < 86400000) return;
        player.lastDaily = now;
    }
    
    if (type === 'money') {
        if (player.money < 50000) {
            alert("–ù—É–∂–Ω–æ 50.000 ‚ÇΩ!");
            return;
        }
        player.money -= 50000;
        updateStats();
    }

    startRouletteAnim(type);
}

function watchAdsAction(count) {
    alert("–ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∫–ª–∞–º—ã...");
    setTimeout(() => {
        if (count === 5) {
            player.ads5++;
            if (player.ads5 >= 5) { player.ads5 = 0; startRouletteAnim('normal'); }
        } else {
            player.ads15++;
            if (player.ads15 >= 15) { player.ads15 = 0; startRouletteAnim('elite'); }
        }
        saveGame();
        updateStats();
    }, 1500);
}

function startRouletteAnim(type) {
    const modal = document.getElementById('roulette-modal');
    const track = document.getElementById('roulette-track');
    const rewardBox = document.getElementById('reward-display');
    const pool = ITEMS_DB[type];
    
    modal.classList.remove('hidden');
    modal.classList.add('flex');
    rewardBox.classList.add('hidden');
    track.style.transition = 'none';
    track.style.transform = 'translateX(0)';
    track.innerHTML = '';
    
    // –°–æ–∑–¥–∞–µ–º –ª–µ–Ω—Ç—É
    const count = 60;
    let tape = [];
    for(let i=0; i<count; i++) {
        const it = pool[Math.floor(Math.random() * pool.length)];
        tape.push(it);
        const el = document.createElement('div');
        el.className = 'prize-card';
        el.innerHTML = `<span class="text-2xl">${it.isBC ? 'üíé' : 'üèéÔ∏è'}</span><p class="text-[8px] font-bold mt-2 uppercase px-2 text-center">${it.n}</p>`;
        track.appendChild(el);
    }
    
    const winIdx = 54;
    const winItem = tape[winIdx];
    
    setTimeout(() => {
        track.style.transition = 'transform 7s cubic-bezier(0.15, 0, 0.05, 1)';
        const offset = (winIdx * 130) - (window.innerWidth / 2) + 65;
        track.style.transform = `translateX(-${offset}px)`;
    }, 100);
    
    setTimeout(() => {
        rewardBox.classList.remove('hidden');
        document.getElementById('reward-name').innerText = winItem.n;
        document.getElementById('roulette-title').innerText = "–ü–û–ó–î–†–ê–í–õ–Ø–ï–ú!";
        
        // –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ (–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –ø—Ä–æ–¥–∞–∂–∞ –Ω–∏–∂–µ)
        if (winItem.isCash) player.money += winItem.p;
        else if (winItem.isBC) player.bc += winItem.bcVal;
        else player.garage.push({ ...winItem, id: Date.now() });
        
        saveGame();
        updateStats();
    }, 7200);
}

/** –ì–ê–†–ê–ñ –ò –ü–†–û–î–ê–ñ–ê (100% –°–¢–û–ò–ú–û–°–¢–¨) */
function renderInventory() {
    const grid = document.getElementById('inventory-grid');
    grid.innerHTML = player.garage.length === 0 ? '<p class="col-span-2 text-center py-20 text-gray-600 text-xs">–ì–ê–†–ê–ñ –ü–£–°–¢</p>' : '';
    
    player.garage.forEach((item, index) => {
        const div = document.createElement('div');
        div.className = 'glass-card p-4 flex flex-col items-center';
        div.innerHTML = `
            <div class="text-2xl mb-2">üèéÔ∏è</div>
            <p class="text-[10px] font-black text-center mb-1 h-6">${item.n}</p>
            <p class="text-[10px] text-green-500 font-bold mb-3">${item.p.toLocaleString()} ‚ÇΩ</p>
            <button onclick="sellAuto(${index})" class="w-full py-2 bg-white/5 rounded text-[8px] font-bold hover:bg-white/10">–ü–†–û–î–ê–¢–¨ (100%)</button>
        `;
        grid.appendChild(div);
    });
}

function sellAuto(idx) {
    const item = player.garage[idx];
    // –¢–µ–ø–µ—Ä—å –æ—Ç–¥–∞–µ–º –ø–æ–ª–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –±–µ–∑ –≤—ã—á–µ—Ç–æ–≤
    player.money += item.p;
    player.garage.splice(idx, 1);
    
    saveGame();
    updateStats();
    renderInventory();
}

/** –ò–°–¢–û–†–ò–Ø –ò –¢–ê–ô–ú–ï–†–´ */
function renderHistory() {
    const cont = document.getElementById('withdraw-history');
    cont.innerHTML = '';
    player.history.forEach(h => {
        const d = document.createElement('div');
        d.className = 'bg-white/5 p-3 rounded-lg flex justify-between items-center border-l-2 border-blue-500';
        d.innerHTML = `
            <div>
                <p class="text-[10px] font-bold text-white">${h.nick} (${h.serv})</p>
                <p class="text-[8px] text-gray-500">${h.date}</p>
            </div>
            <div class="text-right">
                <p class="text-xs font-black text-blue-400">-${h.sum} BC</p>
                <p class="text-[8px] italic text-yellow-500">${h.status}</p>
            </div>
        `;
        cont.appendChild(d);
    });
}

function updateTimer() {
    const diff = 86400000 - (Date.now() - player.lastDaily);
    const el = document.getElementById('timer-daily');
    if (diff > 0) {
        const h = Math.floor(diff / 3600000);
        const m = Math.floor((diff % 3600000) / 60000);
        const s = Math.floor((diff % 60000) / 1000);
        el.innerText = `–î–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ ${h}—á ${m}–º ${s}—Å`;
        document.getElementById('btn-daily').disabled = true;
    } else {
        el.innerText = "–î–æ—Å—Ç—É–ø–Ω–æ —Å–µ–π—á–∞—Å!";
        document.getElementById('btn-daily').disabled = false;
    }
}

/** –ù–ê–í–ò–ì–ê–¶–ò–Ø */
function switchTab(id) {
    document.querySelectorAll('.tab-pane').forEach(p => p.classList.remove('active'));
    document.getElementById('pane-' + id).classList.add('active');
    
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('nav-item-active', 'text-gray-500'));
    document.querySelectorAll('.nav-item').forEach(n => n.classList.add('text-gray-500'));
    document.getElementById('nav-' + id).classList.add('nav-item-active');
    document.getElementById('nav-' + id).classList.remove('text-gray-500');
    
    if (id === 'garage') renderInventory();
}

function closeRoulette() {
    document.getElementById('roulette-modal').classList.add('hidden');
    document.getElementById('roulette-title').innerText = "–û–¢–ö–†–´–¢–ò–ï...";
    renderInventory();
}

// –ó–∞–ø—É—Å–∫
initGame();
</script>

</body>
</html>
