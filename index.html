<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Locus Gold Luxury</title>
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-database-compat.js"></script>
    <script src="https://sad.adsgram.ai/js/sad.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;900&display=swap" rel="stylesheet">
    <style>
        :root { --red: #ff3b3b; --red-glow: rgba(255, 59, 59, 0.5); --bg: #030303; }
        body { background: var(--bg); color: #fff; font-family: 'Montserrat', sans-serif; overflow: hidden; height: 100vh; user-select: none; }
        
        /* Glass UI */
        .glass { background: linear-gradient(145deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.01) 100%); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.08); border-radius: 28px; }
        
        .tab-content { display: none; height: calc(100vh - 140px); overflow-y: auto; padding: 20px; scrollbar-width: none; }
        .active { display: block; animation: slideUp 0.4s cubic-bezier(0.2, 0.8, 0.2, 1); }
        
        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        
        /* –ö–Ω–æ–ø–∫–∏ */
        .btn-main { background: linear-gradient(180deg, #ff4d4d 0%, #8b0000 100%); font-weight: 900; border-radius: 18px; transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); box-shadow: 0 10px 20px -5px var(--red-glow); color: white; text-transform: uppercase; letter-spacing: 1px; border: 1px solid rgba(255,255,255,0.1); }
        .btn-main:active { transform: scale(0.92); box-shadow: 0 5px 10px var(--red-glow); }
        
        .nav-active { color: var(--red) !important; filter: drop-shadow(0 0 12px var(--red)); transform: translateY(-3px); }
        
        input, select { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); color: #fff; padding: 16px; border-radius: 18px; width: 100%; outline: none; font-size: 14px; transition: 0.3s; }
        input:focus { border-color: var(--red); background: rgba(255,255,255,0.06); }

        /* –ö–Ω–æ–ø–∫–∞ –∫–ª–∏–∫–∞ */
        .click-area { 
            width: 220px; height: 220px; border-radius: 50%; 
            background: radial-gradient(circle, #1a1a1a 0%, #000 100%); 
            border: 12px solid #0a0a0a; display: flex; align-items: center; justify-content: center; 
            margin: 30px auto; cursor: pointer; position: relative; transition: 0.1s;
            box-shadow: 0 0 50px rgba(0,0,0,0.8), inset 0 0 30px rgba(255,255,255,0.02);
        }
        .click-area::before { content: ''; position: absolute; inset: -15px; border-radius: 50%; border: 1px solid var(--red); opacity: 0.1; animation: pulse 3s infinite; }
        @keyframes pulse { 0% { transform: scale(1); opacity: 0.1; } 50% { opacity: 0.3; } 100% { transform: scale(1.4); opacity: 0; } }
        .click-area:active { transform: scale(0.9); border-color: var(--red); box-shadow: 0 0 30px var(--red-glow); }

        .case-card { transition: 0.3s; position: relative; overflow: hidden; }
        .case-card::after { content: ''; position: absolute; top: 0; left: -100%; width: 50%; height: 100%; background: linear-gradient(to right, transparent, rgba(255,255,255,0.03), transparent); transition: 0.5s; }
        .case-card:hover::after { left: 100%; }
        
        nav { background: rgba(5,5,5,0.8); backdrop-filter: blur(20px); }
    </style>
</head>
<body>

<div class="max-w-md mx-auto h-full flex flex-col relative">
    <div class="p-8 flex justify-between items-center z-10">
        <div class="space-y-1">
            <p class="text-[9px] text-gray-500 font-black uppercase tracking-widest">–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Å—á–µ—Ç</p>
            <p id="m-rub" class="text-3xl font-black italic tracking-tighter">0 ‚ÇΩ</p>
        </div>
        <div class="text-right space-y-1">
            <p class="text-[9px] text-blue-500 font-black uppercase tracking-widest text-glow">Black Coins</p>
            <p id="m-bc" class="text-3xl font-black italic text-blue-400 tracking-tighter">0</p>
        </div>
    </div>

    <div id="tab-home" class="tab-content active text-center">
        <div class="click-area" onclick="Game.click()">
            <span class="text-7xl font-black text-red-600 italic tracking-tighter select-none" style="text-shadow: 0 0 25px rgba(255,0,0,0.4)">BR</span>
        </div>
        
        <div class="glass p-6 mt-10 text-left relative overflow-hidden">
            <div class="flex items-center gap-2 mb-4">
                <div class="w-1 h-4 bg-blue-500 rounded-full"></div>
                <p class="text-[11px] text-blue-400 font-black uppercase italic">–û–±–º–µ–Ω–Ω–∏–∫ –≤–∞–ª—é—Ç</p>
            </div>
            <div class="flex gap-3">
                <input id="ex-val" type="number" placeholder="–°—É–º–º–∞ –≤ ‚ÇΩ">
                <button onclick="Game.exchange()" class="btn-main px-6 py-2 text-[10px]">–û–ë–ú–ï–ù</button>
            </div>
            <p class="text-[9px] text-gray-500 mt-3 font-medium opacity-60">–ö—É—Ä—Å —Å–∏—Å—Ç–µ–º—ã: 1.000.000 ‚ÇΩ = 1 BC</p>
        </div>
    </div>

    <div id="tab-cases" class="tab-content space-y-4">
        <div class="flex items-center justify-between mb-2">
            <h2 class="font-black italic text-white uppercase tracking-widest text-xs">–ú–∞–≥–∞–∑–∏–Ω –£–¥–∞—á–∏</h2>
            <div class="h-[1px] flex-1 bg-white/10 ml-4"></div>
        </div>
        
        <div class="glass p-5 flex justify-between items-center border-l-[6px] border-gray-600 case-card">
            <div class="space-y-1">
                <p class="text-xs font-black uppercase tracking-wider text-gray-300">–ö–µ–π—Å ¬´–ë–æ–º–∂¬ª</p>
                <p class="text-[9px] font-bold text-gray-500">–ü—Ä–∏–∑: <span class="text-white">1-5 BC</span></p>
            </div>
            <button onclick="Game.watchAd('c1')" class="btn-main px-5 py-3 text-[9px]">–û–¢–ö–†–´–¢–¨</button>
        </div>

        <div class="glass p-5 flex justify-between items-center border-l-[6px] border-blue-600 case-card">
            <div class="space-y-1">
                <p class="text-xs font-black uppercase tracking-wider text-blue-400">–ö–µ–π—Å ¬´–ü–µ—Ä–µ–∫—É–ø¬ª</p>
                <p class="text-[9px] font-bold text-gray-500">–ü—Ä–∏–∑: <span class="text-blue-300">25-50 BC</span></p>
                <p id="p-c2" class="text-[8px] text-blue-200/40 font-black uppercase tracking-tighter">–ü–†–û–ì–†–ï–°–°: 0/3 ADS</p>
            </div>
            <button onclick="Game.watchAd('c2')" class="btn-main px-5 py-3 text-[9px] !bg-blue-600">–°–ú–û–¢–†–ï–¢–¨</button>
        </div>

        <div class="glass p-5 flex justify-between items-center border-l-[6px] border-yellow-500 case-card">
            <div class="space-y-1">
                <p class="text-xs font-black uppercase tracking-wider text-yellow-500">–ö–µ–π—Å ¬´–í–ª–∞–¥–µ–ª–µ—Ü –¢–ö¬ª</p>
                <p class="text-[9px] font-bold text-gray-500">–ü—Ä–∏–∑: <span class="text-yellow-200">50-150 BC</span></p>
                <p id="p-c3" class="text-[8px] text-yellow-200/40 font-black uppercase tracking-tighter">–ü–†–û–ì–†–ï–°–°: 0/5 ADS</p>
            </div>
            <button onclick="Game.watchAd('c3')" class="btn-main px-5 py-3 text-[9px] !bg-yellow-600">–°–ú–û–¢–†–ï–¢–¨</button>
        </div>
    </div>

    <div id="tab-out" class="tab-content">
        <div class="glass p-7 mb-8">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xs font-black uppercase text-red-500 italic tracking-widest">–í—ã–ø–ª–∞—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä</h3>
                <span class="text-[8px] font-black px-2 py-1 bg-white/5 rounded border border-white/10 text-gray-400">–ú–ò–ù. 500 BC</span>
            </div>
            
            <div class="space-y-5">
                <input id="out-nick" type="text" placeholder="–ò–≥—Ä–æ–≤–æ–π Nick_Name">
                <select id="out-srv" class="font-bold text-xs"></select>
                <input id="out-sum" type="number" placeholder="–°—É–º–º–∞ BC">
                <button onclick="Game.withdraw()" class="btn-main w-full py-5 text-[11px] mt-2">–ü–û–õ–£–ß–ò–¢–¨ –î–û–ù–ê–¢</button>
            </div>
        </div>
        
        <div class="px-2">
            <p class="text-[10px] font-black text-gray-600 uppercase italic tracking-[2px] mb-4">–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</p>
            <div id="out-history" class="space-y-3 pb-10"></div>
        </div>
    </div>

    <nav class="fixed bottom-6 left-6 right-6 glass flex justify-around py-4 z-50 shadow-2xl">
        <div onclick="Game.tab('home')" id="n-home" class="flex flex-col items-center text-gray-500 nav-active cursor-pointer transition-all">
            <span class="text-xl">‚ö°</span><span class="text-[9px] font-black uppercase mt-1">–ò–≥—Ä–∞</span>
        </div>
        <div onclick="Game.tab('cases')" id="n-cases" class="flex flex-col items-center text-gray-500 cursor-pointer transition-all">
            <span class="text-xl">üíé</span><span class="text-[9px] font-black uppercase mt-1">–ö–µ–π—Å—ã</span>
        </div>
        <div onclick="Game.tab('out')" id="n-out" class="flex flex-col items-center text-gray-500 cursor-pointer transition-all">
            <span class="text-xl">üí∏</span><span class="text-[9px] font-black uppercase mt-1">–í—ã–≤–æ–¥</span>
        </div>
    </nav>
</div>

<script>
// --- –ö–û–ù–§–ò–ì ---
const firebaseConfig = {
  apiKey: "AIzaSyA4zMBfNc1wTIN75Qr1KMBTrlgiU5qG-fA",
  authDomain: "locus-gold-game.firebaseapp.com",
  projectId: "locus-gold-game",
  storageBucket: "locus-gold-game.firebasestorage.app",
  messagingSenderId: "450338666762",
  appId: "1:450338666762:web:f40ef7268c539ef16662f3"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function getID() {
    let urlId = new URLSearchParams(window.location.search).get('id');
    if(urlId) return urlId;
    let localId = localStorage.getItem('locus_user_id');
    if(!localId) {
        localId = "u" + Math.floor(Math.random() * 899999 + 100000);
        localStorage.setItem('locus_user_id', localId);
    }
    return localId;
}
const userId = getID();

const SERVERS = ["RED","GREEN","BLUE","YELLOW","ORANGE","PURPLE","LIME","PINK","CHERRY","BLACK","INDIGO","WHITE","MAGENTA","CRIMSON","GOLD","AZURE","PLATINUM","AQUA","GRAY","ICE","CHILLI","CHOCO","MOSCOW","SPB","UFA","SOCHI","KAZAN","SAMARA","ROSTOV","ANAPA","EKATERINBURG","KRASNODAR","ARZAMAS","NOVOSIBIRSK","GROZNY","SARATOV","OMSK","IRKUTSK","VOLGOGRAD","VORONEZH","BELGOROD","MAKHACHKALA","VLADIKAVKAZ","VLADIVOSTOK","KALININGRAD","CHELYABINSK","KRASNOYARSK","CHEBOKSARY","KHABAROVSK","PERM","TULA","RYAZAN","MURMANSK","PENZA","KURSK","ARKHANGELSK","ORENBURG","KIROV","KEMEROVO","TYUMEN","TOLYATTI","IVANOVO","STAVROPOL","SMOLENSK","PSKOV","BRYANSK","OREL","YAROSLAVL","BARNAUL","LIPETSK","ULYANOVSK","YAKUTSK","TAMBOV","BRATSK","ASTRAKHAN","CHITA","KOSTROMA","VLADIMIR","KALUGA","N.NOVGOROD","TAGANROG","VOLOGDA","TVER","TOMSK","IZHEVSK","SURGUT","PODOLSK","MAGADAN","CHEREPOVETS","NORILSK"];

const Game = {
    u: { m: 0, bc: 0, ac2: 0, ac3: 0 },
    
    init() {
        db.ref('users/' + userId).on('value', (s) => {
            if(s.exists()) this.u = { ...this.u, ...s.val() };
            else this.save();
            this.updateUI();
        });
        const sel = document.getElementById('out-srv');
        SERVERS.forEach(x => { sel.innerHTML += `<option value="${x}">${x} SERVER</option>`; });
        this.loadHistory();
    },

    updateUI() {
        document.getElementById('m-rub').innerText = Math.floor(this.u.m).toLocaleString() + ' ‚ÇΩ';
        document.getElementById('m-bc').innerText = this.u.bc.toLocaleString();
        document.getElementById('p-c2').innerText = `–ü–†–û–ì–†–ï–°–°: ${this.u.ac2 || 0}/3 ADS`;
        document.getElementById('p-c3').innerText = `–ü–†–û–ì–†–ï–°–°: ${this.u.ac3 || 0}/5 ADS`;
    },

    save() { db.ref('users/' + userId).update(this.u); },
    
    // –í–æ–∑–≤—Ä–∞—â–µ–Ω–æ +100 –∑–∞ –∫–ª–∏–∫
    click() { this.u.m += 100; this.save(); },

    tab(id) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('nav div').forEach(n => n.classList.remove('nav-active'));
        document.getElementById('tab-'+id).classList.add('active');
        document.getElementById('n-'+id).classList.add('nav-active');
    },

    async watchAd(type) {
        try {
            const ad = window.Adsgram.init({ blockId: "20963" });
            const res = await ad.show();
            if(res.done) {
                if(type === 'c1') {
                    const win = Math.floor(Math.random() * 5) + 1;
                    this.u.bc += win; alert(`–í–´–ò–ì–†–´–®: ${win} BC!`);
                } else if(type === 'c2') {
                    this.u.ac2 = (this.u.ac2 || 0) + 1;
                    if(this.u.ac2 >= 3) { 
                        this.u.ac2 = 0; 
                        let w = Math.floor(Math.random() * 26) + 25; 
                        this.u.bc += w; alert(`–ö–ï–ô–° –û–¢–ö–†–´–¢: +${w} BC!`); 
                    }
                } else if(type === 'c3') {
                    this.u.ac3 = (this.u.ac3 || 0) + 1;
                    if(this.u.ac3 >= 5) { 
                        this.u.ac3 = 0; 
                        let w = Math.floor(Math.random() * 101) + 50; 
                        this.u.bc += w; alert(`–ö–£–® –°–û–†–í–ê–ù: +${w} BC!`); 
                    }
                }
                this.save(); this.updateUI();
            }
        } catch(e) { alert("–†–µ–∫–ª–∞–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è..."); }
    },

    exchange() {
        const v = parseInt(document.getElementById('ex-val').value);
        if(v >= 1000000 && this.u.m >= v) { 
            this.u.m -= v; 
            this.u.bc += Math.floor(v/1000000); 
            this.save(); 
            alert("–û–ë–ú–ï–ù –ó–ê–í–ï–†–®–ï–ù!"); 
            document.getElementById('ex-val').value = '';
        } else alert("–ú–∏–Ω. –æ–±–º–µ–Ω –æ—Ç 1.000.000 ‚ÇΩ");
    },

    withdraw() {
        const n = document.getElementById('out-nick').value, s = document.getElementById('out-srv').value, a = parseInt(document.getElementById('out-sum').value);
        if(n.length > 3 && a >= 500 && this.u.bc >= a) {
            this.u.bc -= a; this.save();
            // –¢–µ–ø–µ—Ä—å —Å—Ç–∞—Ç—É—Å –ø–∏—à–µ—Ç—Å—è "–í—ã–≤–µ–¥–µ–Ω–æ"
            db.ref('payouts/' + userId).push({ nick: n, srv: s, sum: a, status: "–í—ã–≤–µ–¥–µ–Ω–æ", date: new Date().toLocaleDateString() });
            alert("–£–°–ü–ï–®–ù–û: –î–æ–Ω–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –≤–∞—à –∞–∫–∫–∞—É–Ω—Ç!");
            document.getElementById('out-sum').value = '';
        } else alert("–û—à–∏–±–∫–∞: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å (–º–∏–Ω. 500 BC) –∏ –Ω–∏–∫!");
    },

    loadHistory() {
        db.ref('payouts/' + userId).on('value', (s) => {
            const h = document.getElementById('out-history'); h.innerHTML = '';
            if(!s.exists()) h.innerHTML = '<p class="text-[9px] text-gray-800 text-center uppercase tracking-widest mt-4">–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞</p>';
            s.forEach(c => {
                const d = c.val();
                h.innerHTML += `
                <div class="glass p-5 flex justify-between items-center border-l-2 border-red-500 bg-white/[0.02]">
                    <div class="space-y-1">
                        <p class="font-black text-white text-sm">${d.sum} Black Coins</p>
                        <p class="text-[8px] text-gray-500 font-bold uppercase tracking-tighter">${d.srv} ‚Ä¢ ${d.nick}</p>
                    </div>
                    <div class="text-right">
                        <p class="text-green-500 font-black uppercase text-[9px] tracking-tighter">${d.status}</p>
                        <p class="text-[8px] text-gray-700 font-medium mt-1">${d.date}</p>
                    </div>
                </div>`;
            });
        });
    }
};
window.onload = () => Game.init();
</script>
</body>
</html>
