<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Black Russia - Locus Gold Ultimate Edition</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@700&family=Montserrat:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <script src="https://adsgram.ai/sdk-v1.js"></script>

    <style>
        :root {
            --br-red: #ff3333;
            --br-dark-red: #b30000;
            --bg-main: #0a0a0c;
            --bg-card: #141417;
            --blue-accent: #3b82f6;
            --gold-accent: #fbbf24;
            --safe-area-bottom: env(safe-area-inset-bottom);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: var(--bg-main);
            color: #ffffff;
            font-family: 'Montserrat', sans-serif;
            overflow: hidden;
            height: 100vh;
            user-select: none;
        }

        .oswald { font-family: 'Oswald', sans-serif; text-transform: uppercase; font-style: italic; }

        /* –ö–∞—Å—Ç–æ–º–Ω—ã–π —Å–∫—Ä–æ–ª–ª–±–∞—Ä */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –∫–Ω–æ–ø–æ–∫ */
        .btn-press:active { transform: scale(0.96); }
        .click-active:active { transform: scale(0.92); }

        /* –°—Ç–∏–ª–∏ –∫–ª–∏–∫–µ—Ä–∞ */
        .click-area {
            position: relative;
            width: 240px;
            height: 240px;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .main-btn-outer {
            width: 210px;
            height: 210px;
            border-radius: 50%;
            background: radial-gradient(circle, #2a2a2e 0%, #000 100%);
            border: 8px solid #1f1f22;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            box-shadow: 0 0 60px rgba(0,0,0,0.9);
            transition: all 0.1s ease;
        }

        .main-btn-outer::before {
            content: "BR";
            font-family: 'Oswald';
            font-size: 80px;
            color: var(--br-red);
            text-shadow: 0 0 25px rgba(255,51,51,0.6);
            font-weight: 900;
            letter-spacing: -2px;
        }

        /* –†—É–ª–µ—Ç–∫–∞ */
        .roulette-wrapper {
            position: relative;
            width: 100%;
            height: 160px;
            background: #000;
            margin: 30px 0;
            overflow: hidden;
            border-top: 1px solid rgba(255,255,255,0.05);
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .roulette-track {
            display: flex;
            position: absolute;
            left: 0;
            height: 100%;
            will-change: transform;
        }

        .roulette-item {
            min-width: 160px;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-right: 1px solid #0a0a0c;
            background: linear-gradient(180deg, #141416 0%, #0d0d0f 100%);
        }

        .center-marker {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 4px;
            background: var(--br-red);
            z-index: 50;
            transform: translateX(-50%);
            box-shadow: 0 0 20px var(--br-red);
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        nav {
            padding-bottom: var(--safe-area-bottom);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: #666;
            transition: all 0.3s ease;
        }

        .nav-active {
            color: var(--br-red);
        }

        .nav-dot {
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: transparent;
        }

        .nav-active .nav-dot {
            background: var(--br-red);
            box-shadow: 0 0 8px var(--br-red);
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.98);
            z-index: 1000;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        /* –£—Ç–∏–ª–∏—Ç—ã */
        .glass-card {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.05);
            backdrop-filter: blur(5px);
        }
    </style>
</head>
<body>

<div id="app" class="max-w-md mx-auto h-screen flex flex-col relative overflow-hidden">
    
    <header class="pt-8 px-6 flex justify-between items-start z-20">
        <div class="stats-group">
            <p class="text-[10px] font-bold text-gray-500 uppercase tracking-widest oswald">–ë–∞–ª–∞–Ω—Å –†—É–±–ª–µ–π</p>
            <div class="flex items-center gap-2">
                <span id="ui-money" class="text-2xl font-black oswald tracking-tight">0 ‚ÇΩ</span>
            </div>
        </div>
        <div class="stats-group text-right">
            <p class="text-[10px] font-bold text-blue-500 uppercase tracking-widest oswald">–î–æ–Ω–∞—Ç –í–∞–ª—é—Ç–∞</p>
            <div class="flex items-center justify-end gap-2">
                <span id="ui-bc" class="text-2xl font-black text-blue-400 oswald tracking-tight">0 BC</span>
            </div>
        </div>
    </header>

    <main id="main-scroll" class="flex-1 overflow-y-auto px-6 pt-4 pb-32">
        
        <section id="view-home" class="game-view space-y-8">
            <div class="click-area">
                <div class="main-btn-outer click-active" onclick="App.handleMainClick(event)">
                    <p class="oswald text-[9px] mt-4 tracking-[0.4em] text-gray-500">–ù–∞–∂–º–∏ –Ω–∞ –ª–æ–≥–æ</p>
                </div>
            </div>

            <div class="glass-card p-5 rounded-[2.5rem] space-y-4">
                <div class="flex justify-between items-center">
                    <span class="text-[10px] font-bold text-blue-400 uppercase oswald italic">–û–±–º–µ–Ω–Ω—ã–π –ø—É–Ω–∫—Ç</span>
                    <span class="text-[9px] text-gray-500 font-medium">1.000.000 ‚ÇΩ ‚Üí 1 BC</span>
                </div>
                <div class="flex gap-3">
                    <input id="input-exchange" type="number" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É..." 
                           class="flex-1 bg-black/40 border border-white/5 rounded-2xl p-4 text-xs font-bold outline-none focus:border-blue-500/50 transition-all">
                    <button onclick="App.performExchange()" 
                            class="bg-blue-600 px-6 rounded-2xl text-[10px] font-black uppercase oswald italic btn-press shadow-lg shadow-blue-900/20">–û–±–º–µ–Ω</button>
                </div>
            </div>
        </section>

        <section id="view-cases" class="game-view hidden space-y-5">
            <h2 class="oswald text-2xl italic font-black text-white/90">–ú–∞–≥–∞–∑–∏–Ω –∫–µ–π—Å–æ–≤</h2>
            
            <div class="glass-card p-5 rounded-3xl flex justify-between items-center border-l-4 border-blue-600 relative overflow-hidden group">
                <div class="absolute inset-0 bg-blue-600/5 opacity-0 group-active:opacity-100 transition-opacity"></div>
                <div class="flex gap-4 items-center relative z-10">
                    <div class="w-12 h-12 bg-blue-600/20 rounded-2xl flex items-center justify-center text-2xl">üíé</div>
                    <div>
                        <p class="font-black text-xs uppercase italic oswald tracking-wider">–ö–µ–π—Å –ú–∞–∂–æ—Ä</p>
                        <p id="ui-ads-progress" class="text-[10px] text-blue-400 font-bold">–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ: 0 / 5</p>
                    </div>
                </div>
                <button onclick="App.AdsModule.showAd()" 
                        class="bg-blue-600 hover:bg-blue-500 px-6 py-3 rounded-2xl text-[10px] font-black uppercase oswald italic btn-press relative z-10">–°–º–æ—Ç—Ä–µ—Ç—å</button>
            </div>

            <div class="glass-card p-5 rounded-3xl flex justify-between items-center border-l-4 border-green-500">
                <div class="flex gap-4 items-center">
                    <div class="w-12 h-12 bg-green-600/20 rounded-2xl flex items-center justify-center text-2xl">üéÅ</div>
                    <div>
                        <p class="font-black text-xs uppercase italic oswald tracking-wider">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π</p>
                        <p id="ui-daily-timer" class="text-[10px] text-green-500 font-bold uppercase italic">–ì–æ—Ç–æ–≤ –∫ –æ—Ç–∫—Ä—ã—Ç–∏—é</p>
                    </div>
                </div>
                <button onclick="App.openFreeCase()" class="bg-green-600 px-6 py-3 rounded-2xl text-[10px] font-black uppercase oswald italic btn-press">–û—Ç–∫—Ä—ã—Ç—å</button>
            </div>

            <div class="glass-card p-5 rounded-3xl flex justify-between items-center border-l-4 border-yellow-500">
                <div class="flex gap-4 items-center">
                    <div class="w-12 h-12 bg-yellow-500/20 rounded-2xl flex items-center justify-center text-2xl">üí∞</div>
                    <div>
                        <p class="font-black text-xs uppercase italic oswald tracking-wider">–ù–æ–≤–∏—á–æ–∫</p>
                        <p class="text-[10px] text-gray-500 font-bold">100.000 ‚ÇΩ</p>
                    </div>
                </div>
                <button onclick="App.buyCase(100000, 'low')" class="bg-white/5 border border-white/10 px-6 py-3 rounded-2xl text-[10px] font-black uppercase oswald italic btn-press">–ö—É–ø–∏—Ç—å</button>
            </div>

            <div class="glass-card p-5 rounded-3xl flex justify-between items-center border-l-4 border-red-600">
                <div class="flex gap-4 items-center">
                    <div class="w-12 h-12 bg-red-600/20 rounded-2xl flex items-center justify-center text-2xl">üëë</div>
                    <div>
                        <p class="font-black text-xs uppercase italic oswald tracking-wider">–≠–ª–∏—Ç–Ω—ã–π</p>
                        <p class="text-[10px] text-gray-500 font-bold">15.000.000 ‚ÇΩ</p>
                    </div>
                </div>
                <button onclick="App.buyCase(15000000, 'high')" class="bg-red-600 px-6 py-3 rounded-2xl text-[10px] font-black uppercase oswald italic btn-press">–ö—É–ø–∏—Ç—å</button>
            </div>
        </section>

        <section id="view-garage" class="game-view hidden">
            <div class="flex justify-between items-end mb-8">
                <h2 class="oswald text-2xl italic font-black">–í–∞—à –∞–≤—Ç–æ–ø–∞—Ä–∫</h2>
                <span id="ui-garage-count" class="text-[10px] text-gray-500 font-bold uppercase">0 –∞–≤—Ç–æ</span>
            </div>
            <div id="garage-container" class="grid grid-cols-2 gap-4">
                </div>
        </section>

        <section id="view-out" class="game-view hidden space-y-6">
            <div class="glass-card p-8 rounded-[3rem] text-center border-t-2 border-red-600/30">
                <h3 class="oswald text-xl italic text-red-500 mb-6">–ó–∞—è–≤–∫–∞ –Ω–∞ –≤—ã–≤–æ–¥ BC</h3>
                <div class="space-y-4">
                    <input id="out-nick" type="text" placeholder="–í–∞—à Nick_Name" class="w-full bg-black/50 border border-white/5 rounded-2xl p-4 text-xs font-bold outline-none">
                    <select id="out-server" class="w-full bg-black/50 border border-white/5 rounded-2xl p-4 text-xs font-bold outline-none oswald italic">
                        </select>
                    <input id="out-amount" type="number" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ BC" class="w-full bg-black/50 border border-white/5 rounded-2xl p-4 text-xs font-bold outline-none">
                    <div class="pt-4">
                        <button onclick="App.submitWithdraw()" class="w-full bg-red-600 py-5 rounded-2xl text-[11px] font-black uppercase oswald italic tracking-[0.2em] btn-press shadow-xl shadow-red-900/20">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div id="modal-roulette" class="overlay">
        <h2 class="oswald text-2xl italic tracking-[0.6em] text-gray-600 mb-2">–û—Ç–∫—Ä—ã—Ç–∏–µ...</h2>
        <div class="roulette-wrapper">
            <div class="center-marker"></div>
            <div id="roulette-track" class="roulette-track"></div>
        </div>
        <div id="win-container" class="opacity-0 translate-y-10 transition-all duration-700 flex flex-col items-center">
            <p class="text-blue-400 font-bold uppercase tracking-widest text-[10px] mb-2 italic">–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</p>
            <h3 id="win-name" class="oswald text-3xl text-white mb-10 text-center px-6 leading-tight">–í–ê–® –ü–†–ò–ó</h3>
            <button onclick="App.claimPrize()" class="bg-white text-black px-16 py-5 rounded-full text-[11px] font-black tracking-[0.3em] uppercase btn-press">–ó–∞–±—Ä–∞—Ç—å</button>
        </div>
    </div>

    <nav class="fixed bottom-0 left-0 right-0 bg-black/80 backdrop-blur-2xl border-t border-white/5 flex justify-around items-center h-20 z-50">
        <div onclick="App.switchTab('home')" class="nav-item cursor-pointer nav-active" id="btn-nav-home">
            <span class="text-2xl">üè†</span>
            <span class="text-[8px] font-black uppercase">–ì–ª–∞–≤–Ω–∞—è</span>
            <div class="nav-dot"></div>
        </div>
        <div onclick="App.switchTab('cases')" class="nav-item cursor-pointer" id="btn-nav-cases">
            <span class="text-2xl">üéÅ</span>
            <span class="text-[8px] font-black uppercase">–ö–µ–π—Å—ã</span>
            <div class="nav-dot"></div>
        </div>
        <div onclick="App.switchTab('garage')" class="nav-item cursor-pointer" id="btn-nav-garage">
            <span class="text-2xl">üèéÔ∏è</span>
            <span class="text-[8px] font-black uppercase">–ì–∞—Ä–∞–∂</span>
            <div class="nav-dot"></div>
        </div>
        <div onclick="App.switchTab('out')" class="nav-item cursor-pointer" id="btn-nav-out">
            <span class="text-xl">üí≥</span>
            <span class="text-[8px] font-black uppercase">–í—ã–≤–æ–¥</span>
            <div class="nav-dot"></div>
        </div>
    </nav>
</div>

<script>
/**
 * BLACK RUSSIA - LOCUS GOLD ENGINE
 * Version: 4.0.0
 * Features: Adsgram Integrated (ID 20963)
 */

const App = {
    // –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
    config: {
        serverList: ["RED", "GREEN", "BLUE", "YELLOW", "ORANGE", "PURPLE", "LIME", "PINK", "CHERRY", "BLACK", "WHITE", "MAGENTA", "GOLD", "AZURE", "PLATINUM", "GRAY", "ICE", "MOSCOW", "SPB", "UFA", "SOCHI", "KAZAN", "SAMARA", "ROSTOV", "ANAPA", "SARATOV", "OMSK", "IRKUTSK", "PERM", "TULA"],
        exchangeRate: 1000000,
        clickBase: 125,
        clickBonusPerCar: 75,
        adsRequired: 5
    },

    // –î–ê–ù–ù–´–ï –ò–ì–†–û–ö–ê
    user: {
        money: 0,
        bc: 0,
        adsSeen: 0,
        lastDaily: 0,
        inventory: [],
        stats: { totalClicks: 0, casesOpened: 0 }
    },

    // –ü–£–õ–´ –ü–†–ò–ó–û–í
    pools: {
        free: [
            { id: 1, n: "ZAZ 968", p: 15000, i: "üèéÔ∏è", type: "car" },
            { id: 2, n: "1.000 ‚ÇΩ", v: 1000, i: "üíµ", type: "money" },
            { id: 3, n: "3.000 ‚ÇΩ", v: 3000, i: "üíµ", type: "money" }
        ],
        low: [
            { id: 4, n: "VAZ 2107", p: 120000, i: "üèéÔ∏è", type: "car" },
            { id: 5, n: "Lada Priora", p: 350000, i: "üèéÔ∏è", type: "car" },
            { id: 6, n: "25.000 ‚ÇΩ", v: 25000, i: "üíµ", type: "money" }
        ],
        high: [
            { id: 7, n: "BMW M5 E60", p: 4500000, i: "üèéÔ∏è", type: "car" },
            { id: 8, n: "Mercedes CLS", p: 8000000, i: "üèéÔ∏è", type: "car" },
            { id: 9, n: "Lamborghini Huracan", p: 25000000, i: "üèéÔ∏è", type: "car" },
            { id: 10, n: "1.000.000 ‚ÇΩ", v: 1000000, i: "üíµ", type: "money" }
        ],
        ad: [
            { id: 11, n: "500 BC", v: 500, i: "üíé", type: "bc" },
            { id: 12, n: "100 BC", v: 100, i: "üíé", type: "bc" },
            { id: 13, n: "50 BC", v: 50, i: "üíé", type: "bc" },
            { id: 14, n: "Ferrari LaFerrari", p: 120000000, i: "üèéÔ∏è", type: "car" },
            { id: 15, n: "Bugatti Chiron", p: 180000000, i: "üèéÔ∏è", type: "car" },
            { id: 16, n: "Rolls-Royce Cullinan", p: 70000000, i: "üèéÔ∏è", type: "car" }
        ]
    },

    // –ú–û–î–£–õ–¨ –†–ï–ö–õ–ê–ú–´ (ADSGRAM)
    AdsModule: {
        blockId: "20963",
        controller: null,

        init() {
            if (window.Adsgram) {
                this.controller = window.Adsgram.init({ blockId: this.blockId });
                console.log("Adsgram Initialized");
            }
        },

        async showAd() {
            if (!this.controller) {
                this.init();
                if (!this.controller) return alert("–†–µ–∫–ª–∞–º–Ω–∞—è —Å–µ—Ç—å –µ—â–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...");
            }

            try {
                // –ü–æ–∫–∞–∑ —Ä–µ–∫–ª–∞–º—ã –∏ –æ–∂–∏–¥–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
                const result = await this.controller.show();

                // –ü—Ä–æ–≤–µ—Ä–∫–∞: –±—ã–ª –ª–∏ –¥–æ—Å–º–æ—Ç—Ä–µ–Ω —Ä–æ–ª–∏–∫ —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
                if (result && result.done) {
                    App.handleAdSuccess();
                } else {
                    alert("–ù—É–∂–Ω–æ –¥–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ –¥–æ –∫–æ–Ω—Ü–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–≥—Ä–∞–¥—ã!");
                }
            } catch (error) {
                console.error("Adsgram Error:", error);
                this.handleError(error);
            }
        },

        handleError(err) {
            const msg = {
                'no_ads': "–°–µ–π—á–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ–π —Ä–µ–∫–ª–∞–º—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",
                'user_closed': "–í—ã –∑–∞–∫—Ä—ã–ª–∏ —Ä–µ–∫–ª–∞–º—É —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ.",
                'render_failed': "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–æ–ª–∏–∫–∞."
            };
            alert(msg[err.error] || "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ä–µ–∫–ª–∞–º—ã.");
        }
    },

    // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
    init() {
        this.load();
        this.buildServerList();
        this.AdsModule.init();
        this.updateUI();
        
        setInterval(() => this.updateTimers(), 1000);
        console.log("Game Engine Ready");
    },

    // –õ–û–ì–ò–ö–ê –¢–ê–ë–û–í
    switchTab(tabId) {
        document.querySelectorAll('.game-view').forEach(v => v.classList.add('hidden'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('nav-active'));
        
        document.getElementById('view-' + tabId).classList.remove('hidden');
        document.getElementById('btn-nav-' + tabId).classList.add('nav-active');
        
        if (tabId === 'garage') this.renderGarage();
        window.scrollTo(0,0);
    },

    // –≠–ö–û–ù–û–ú–ò–ö–ê
    handleMainClick(e) {
        const reward = this.config.clickBase + (this.user.inventory.length * this.config.clickBonusPerCar);
        this.user.money += reward;
        this.user.stats.totalClicks++;
        
        // –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç
        this.createFloatingText(e.clientX, e.clientY, `+${reward.toLocaleString()}‚ÇΩ`);
        this.updateUI();
        this.save();
    },

    performExchange() {
        const input = document.getElementById('input-exchange');
        const amount = parseInt(input.value);
        
        if (amount >= this.config.exchangeRate && this.user.money >= amount) {
            const bcReward = Math.floor(amount / this.config.exchangeRate);
            this.user.money -= amount;
            this.user.bc += bcReward;
            input.value = "";
            this.updateUI();
            this.save();
            alert(`–£—Å–ø–µ—à–Ω—ã–π –æ–±–º–µ–Ω! –ü–æ–ª—É—á–µ–Ω–æ: ${bcReward} BC`);
        } else {
            alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –∏–ª–∏ —Å—É–º–º–∞ –º–µ–Ω—å—à–µ 1.000.000 ‚ÇΩ");
        }
    },

    // –û–ë–†–ê–ë–û–¢–ö–ê –†–ï–ö–õ–ê–ú–´
    handleAdSuccess() {
        this.user.adsSeen++;
        if (this.user.adsSeen >= this.config.adsRequired) {
            this.user.adsSeen = 0;
            this.startRoulette('ad');
        }
        this.updateUI();
        this.save();
    },

    // –†–£–õ–ï–¢–ö–ê
    startRoulette(poolKey) {
        const pool = this.pools[poolKey];
        const track = document.getElementById('roulette-track');
        const modal = document.getElementById('modal-roulette');
        const winContainer = document.getElementById('win-container');
        
        modal.style.display = 'flex';
        winContainer.classList.add('opacity-0', 'translate-y-10');
        track.style.transition = 'none';
        track.style.transform = 'translateX(0)';
        track.innerHTML = '';

        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ª–µ–Ω—Ç—É
        let items = [];
        for(let i=0; i<80; i++) {
            const item = pool[Math.floor(Math.random() * pool.length)];
            items.push(item);
            const el = document.createElement('div');
            el.className = 'roulette-item';
            el.innerHTML = `<span class="text-4xl mb-2">${item.i}</span><p class="oswald text-[10px] font-bold text-center px-2">${item.n}</p>`;
            track.appendChild(el);
        }

        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–±–µ–¥–∏—Ç–µ–ª—è (–∏–Ω–¥–µ–∫—Å 72)
        this.winningItem = items[72];

        // –ó–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏
        setTimeout(() => {
            const itemWidth = 160;
            const centerOffset = window.innerWidth / 2;
            const finalPos = (72 * itemWidth) - centerOffset + (itemWidth / 2);
            
            track.style.transition = 'transform 8s cubic-bezier(0.15, 0, 0.05, 1)';
            track.style.transform = `translateX(-${finalPos}px)`;
        }, 100);

        // –§–∏–Ω–∞–ª
        setTimeout(() => {
            document.getElementById('win-name').innerText = this.winningItem.n;
            winContainer.classList.remove('opacity-0', 'translate-y-10');
        }, 8500);
    },

    claimPrize() {
        const item = this.winningItem;
        if (item.type === 'car') this.user.inventory.push({...item, instanceId: Date.now()});
        else if (item.type === 'money') this.user.money += item.v;
        else if (item.type === 'bc') this.user.bc += item.v;

        document.getElementById('modal-roulette').style.display = 'none';
        this.updateUI();
        this.save();
    },

    // –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò
    buyCase(price, key) {
        if (this.user.money >= price) {
            this.user.money -= price;
            this.startRoulette(key);
            this.save();
            this.updateUI();
        } else {
            alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!");
        }
    },

    openFreeCase() {
        const now = Date.now();
        if (now - this.user.lastDaily >= 86400000) {
            this.user.lastDaily = now;
            this.startRoulette('free');
            this.save();
        } else {
            alert("–ö–µ–π—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ–∑–∂–µ!");
        }
    },

    sellCar(idx) {
        const car = this.user.inventory[idx];
        const sellPrice = Math.floor(car.p * 0.75);
        this.user.money += sellPrice;
        this.user.inventory.splice(idx, 1);
        this.renderGarage();
        this.updateUI();
        this.save();
    },

    renderGarage() {
        const container = document.getElementById('garage-container');
        document.getElementById('ui-garage-count').innerText = `${this.user.inventory.length} –ê–í–¢–û`;
        
        if (this.user.inventory.length === 0) {
            container.innerHTML = `<div class="col-span-2 py-20 text-center text-gray-700 oswald text-xs italic">–ì–∞—Ä–∞–∂ –ø—É—Å—Ç. –ö—É–ø–∏—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å!</div>`;
            return;
        }

        container.innerHTML = this.user.inventory.map((car, i) => `
            <div class="glass-card p-5 rounded-3xl text-center border border-white/5">
                <div class="text-4xl mb-3">${car.i}</div>
                <p class="font-black text-[10px] uppercase oswald italic mb-1">${car.n}</p>
                <p class="text-[9px] text-green-500 font-bold mb-4">${(car.p * 0.75).toLocaleString()} ‚ÇΩ</p>
                <button onclick="App.sellCar(${i})" class="w-full py-3 bg-white/5 rounded-xl text-[9px] font-black text-red-500 uppercase btn-press">–ü—Ä–æ–¥–∞—Ç—å</button>
            </div>
        `).join('');
    },

    updateUI() {
        document.getElementById('ui-money').innerText = this.user.money.toLocaleString() + ' ‚ÇΩ';
        document.getElementById('ui-bc').innerText = this.user.bc.toLocaleString() + ' BC';
        document.getElementById('ui-ads-progress').innerText = `–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ: ${this.user.adsSeen} / ${this.config.adsRequired}`;
    },

    updateTimers() {
        const timerEl = document.getElementById('ui-daily-timer');
        const diff = 86400000 - (Date.now() - this.user.lastDaily);
        
        if (diff > 0) {
            const h = Math.floor(diff / 3600000);
            const m = Math.floor((diff % 3600000) / 60000);
            const s = Math.floor((diff % 60000) / 1000);
            timerEl.innerText = `–î–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑: ${h}—á ${m}–º ${s}—Å`;
            timerEl.classList.replace('text-green-500', 'text-gray-500');
        } else {
            timerEl.innerText = "–ì–æ—Ç–æ–≤ –∫ –æ—Ç–∫—Ä—ã—Ç–∏—é";
            timerEl.classList.replace('text-gray-500', 'text-green-500');
        }
    },

    buildServerList() {
        const sel = document.getElementById('out-server');
        this.config.serverList.forEach(s => {
            const opt = document.createElement('option');
            opt.value = s; opt.innerText = s + " SERVER";
            sel.appendChild(opt);
        });
    },

    createFloatingText(x, y, text) {
        const el = document.createElement('div');
        el.className = 'fixed pointer-events-none oswald font-black text-white z-[100] italic';
        el.style.left = x + 'px';
        el.style.top = y + 'px';
        el.innerText = text;
        document.body.appendChild(el);

        const anim = el.animate([
            { transform: 'translate(-50%, 0) scale(1)', opacity: 1 },
            { transform: 'translate(-50%, -100px) scale(1.5)', opacity: 0 }
        ], { duration: 800, easing: 'ease-out' });

        anim.onfinish = () => el.remove();
    },

    submitWithdraw() {
        const nick = document.getElementById('out-nick').value;
        const amount = parseInt(document.getElementById('out-amount').value);
        if (nick.length > 3 && amount > 0 && this.user.bc >= amount) {
            this.user.bc -= amount;
            this.updateUI();
            this.save();
            alert("–ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞! –û–∂–∏–¥–∞–π—Ç–µ –∑–∞—á–∏—Å–ª–µ–Ω–∏—è –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤.");
        } else {
            alert("–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–≤–µ–¥–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ!");
        }
    },

    save() { localStorage.setItem('br_locus_v4_data', JSON.stringify(this.user)); },
    load() {
        const data = localStorage.getItem('br_locus_v4_data');
        if (data) this.user = {...this.user, ...JSON.parse(data)};
    }
};

// –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
window.addEventListener('DOMContentLoaded', () => App.init());
</script>
</body>
</html>
